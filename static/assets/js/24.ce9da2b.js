(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+iuc":function(e,t,n){n("wgeU"),n("FlQf"),n("bBy9"),n("B9jh"),n("dL40"),n("xvv9"),n("V+O7"),e.exports=n("WEpk").Set},"/71P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n("m1cH")),a=u(n("EstQ")),r=u(n("PaSM")),o=u(n("0hVY")),s=u(n("Ah+g")),c=u(n("rMih")),l=u(n("gzP0")),f=n("CeR/");function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"publicField",components:{addField:c.default,searchInfo:s.default,EmptyTip:l.default},mixins:[r.default,o.default],props:{projectId:String,title:{type:String,default:a.default.t("m['字段']")}},data:function(){return{ordering:"-update_at",secondClick:!1,isDataLoading:!1,dataList:[],pagination:{current:1,count:10,limit:10},moreSearch:[{name:this.$t('m.publicField["字段名"]'),placeholder:this.$t('m.publicField["请输入字段名"]'),typeKey:"name__contains",type:"input",value:"",list:[]},{name:this.$t('m.publicField["唯一标识"]'),typeKey:"key",type:"input",value:"",list:[]},{name:this.$t('m.publicField["字段类型"]'),type:"select",multiSelect:!0,typeKey:"type__in",value:[],list:[]},{name:this.$t('m.publicField["更新人"]'),type:"member",multiSelect:!0,typeKey:"updated_by__in",value:[],list:[]},{name:this.$t('m.publicField["更新时间"]'),typeKey:"date_update",type:"datetime",value:"",list:[]}],listInfo:[],workflow:0,stateId:0,sliderInfo:{title:this.$t('m.deployPage["新增字段"]'),show:!1,width:700},changeInfo:{},addOrigin:{isOther:!0,addOriginInfo:{type:"publicField",addUrl:"publicField/add_template_fields",updateUrl:"publicField/update_template_fields"}},fieldsList:[],isEditPublic:!0,emptyTip:{title:this.$t("m['当前项目下还没有 <字段> 元素']"),subTitle:this.$t("m['「字段」是服务表单设计的必要元素之一，将一些常用的字段沉淀下来提供给不同的服务引用，对后续的统一管理维护可以起到很大的帮助！']"),desc:[{src:n("VoSd"),title:this.$t("m['设计字段的数据结构']"),content:this.$t("m['在创建字段时，需要根据字段含义配置字段名、填写方式（如文本框、选择器）、是否必填、校验规则、用户提示等等，尽可能的贴合服务场景进行友好的用户体验设计。']")},{src:n("SPaw"),title:this.$t("m['在服务表单中使用它']"),content:this.$t("m['在设计服务的填写表单时，可以从已经沉淀的字段元素列表中挑选符合场景的字段，从而达到相同含义的字段可以跨服务间进行统一的配置，提高管理效率。']")}],links:[{text:this.$t("m['了解更多关于服务的设计流程和细节']"),btn:this.$t("m['产品文档']"),href:"https://bk.tencent.com/docs/document/6.0/145/6600"},{text:this.$t("m['如何按分类结构化的管理你的诸多服务？']"),btn:this.$t("m['产品文档']"),href:"https://bk.tencent.com/docs/document/6.0/145/6608"}]}}},computed:{createFieldPerm:function(){return this.projectId?["field_create"]:["public_field_create"]},editFieldPerm:function(){return this.projectId?["field_edit"]:["public_field_edit"]},deleteFieldPerm:function(){return this.projectId?["field_delete"]:["public_field_delete"]},sliderStatus:function(){return this.$store.state.common.slideStatus},globalChoise:function(){return this.$store.state.common.configurInfo},curPermission:function(){return this.projectId?this.$store.state.project.projectAuthActions:[]}},mounted:function(){this.getList()},methods:{getList:function(e){var t=this;void 0!==e&&(this.pagination.current=e);var n={page:this.pagination.current,page_size:this.pagination.limit,ordering:this.ordering};n.project_key=this.projectId||"public",this.moreSearch.forEach((function(e){if("datetime"===e.type){if(e.value&&e.value[0]){var i=t.standardTime(e.value[0]),a=t.standardTime(e.value[1]);n.update_at__gte=i,n.update_at__lte=a}}else"input"===e.type?n[e.typeKey]=e.value:Array.isArray(e.value)&&e.value.length&&e.value&&e.typeKey&&(n[e.typeKey]=Array.isArray(e.value)?e.value.join(","):e.value)})),this.isDataLoading=!0,this.$store.dispatch("publicField/get_template_fields",n).then((function(e){t.dataList=e.data.items,t.pagination.current=e.data.page,t.pagination.count=e.data.count})).catch((function(e){(0,f.errorHandler)(e,t)})).finally((function(){t.isDataLoading=!1}))},handleSortChange:function(e){var t=e.order;this.ordering="descending"===t?"-update_at":void 0,this.getList()},handlePageLimitChange:function(){this.pagination.limit=arguments[0],this.getList()},handlePageChange:function(e){this.pagination.current=e,this.getList()},searchContent:function(){this.getList(1)},searchMore:function(){this.moreSearch[2].list=this.globalChoise.field_type.map((function(e){return{key:e.typeName,name:e.name}})),this.$refs.searchInfo.searchMore()},clearSearch:function(){this.moreSearch.forEach((function(e){e.value=e.multiSelect?[]:""})),this.getList(1)},deleteField:function(e){var t=this;if(this.hasPermission(this.deleteFieldPerm,[].concat((0,i.default)(this.$store.state.project.projectAuthActions),(0,i.default)(e.auth_actions))))this.$bkInfo({type:"warning",title:this.$t('m.treeinfo["确认删除此字段？"]'),subTitle:this.$t('m.treeinfo["字段一旦删除，此字段将不在可用。请谨慎操作。"]'),confirmFn:function(){var n=e.id;t.secondClick||(t.secondClick=!0,t.$store.dispatch("publicField/delet_template_fields",{id:n}).then((function(e){t.$bkMessage({message:t.$t('m.systemConfig["删除成功"]'),theme:"success"}),1===t.dataList.length&&(t.pagination.current=1===t.pagination.current?1:t.pagination.current-1),t.getList()})).catch((function(e){(0,f.errorHandler)(e,t)})).finally((function(){t.secondClick=!1})))}});else{var n=null;if(this.projectId){var a=this.$store.state.project.projectInfo;n={project:[{id:a.key,name:a.name}],field:[{id:e.key,name:e.name}]}}else n={public_field:[{id:e.key,name:e.name}]};this.applyForPermission(this.deleteFieldPerm,[].concat((0,i.default)(this.$store.state.project.projectAuthActions),(0,i.default)(e.auth_actions)),n)}},addField:function(){if(this.hasPermission(this.createFieldPerm,this.curPermission))this.changeInfo={workflow:"",id:"",key:"",name:"",type:"STRING",desc:"",layout:"COL_12",validate_type:"REQUIRE",choice:[],is_builtin:!1,source_type:"CUSTOM",source_uri:"",regex:"EMPTY",custom_regex:"",is_tips:!1,tips:"",meta:{code:""}},this.changeInfo.project_key=this.projectId||"public",this.sliderInfo.title=this.$t('m.deployPage["新增字段"]'),this.sliderInfo.show=!0;else{var e={};if(this.projectId){var t=this.$store.state.project.projectInfo;e={project:[{id:t.key,name:t.name}]}}this.applyForPermission(this.createFieldPerm,this.curPermission,e)}},closeShade:function(){this.sliderInfo.show=!1},openField:function(e,t){if(this.hasPermission(t,[].concat((0,i.default)(this.$store.state.project.projectAuthActions),(0,i.default)(e.auth_actions))))this.changeInfo=e,this.changeInfo.is_tips=e.is_tips||!1,this.sliderInfo.title=this.$t('m.treeinfo["编辑字段"]'),this.sliderInfo.show=!0;else{var n=null;if(this.projectId){var a=this.$store.state.project.projectInfo;n={project:[{id:a.key,name:a.name}],field:[{id:e.key,name:e.name}]}}else n={public_field:[{id:e.key,name:e.name}]};this.applyForPermission(t,[].concat((0,i.default)(this.$store.state.project.projectAuthActions),(0,i.default)(e.auth_actions)),n)}}}}},"/jEY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-get-param"},[n("bk-table",{attrs:{data:e.prcTable,size:"small"}},[n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['名称']"),prop:"name"}}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['必选']")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.is_necessary?e.$t('m.treeinfo["是"]'):e.$t('m.treeinfo["否"]'))+"\n            ")]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['备注']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.desc}},[e._v(e._s(t.row.desc||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[n("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:t.row.source_type,callback:function(n){e.$set(t.row,"source_type",n)},expression:"props.row.source_type"}},e._l(e.sourceTypeList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)],1),e._v(" "),"CUSTOM"===t.row.source_type?n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[n("bk-input",{attrs:{clearable:!0,placeholder:e.$t("m.treeinfo['请输入参数值']")},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"props.row.value"}})],1):n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[n("bk-select",{attrs:{clearable:!1,searchable:""},model:{value:t.row.value_key,callback:function(n){e.$set(t.row,"value_key",n)},expression:"props.row.value_key"}},e._l(e.stateList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)],1)]}}])})],1)],1)},a=[];i._withStripped=!0},"0qOp":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-search-info"},[n("collapse-transition",[e.showMore?n("div",{staticClass:"bk-filter"},[n("bk-form",{ref:"dynamicForm",attrs:{"label-width":200,"form-type":"vertical"}},e._l(e.moreSearch,(function(t,i){return t.isHidden?e._e():n("div",{key:i,staticClass:"bk-filter-line"},["input"===t.type?n("bk-form-item",{attrs:{label:t.name}},[n("bk-input",{attrs:{placeholder:t.placeholder},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),e._v(" "),"select"===t.type?n("bk-form-item",{attrs:{label:t.name}},[n("bk-select",{attrs:{searchable:"","show-select-all":t.multiSelect,multiple:t.multiSelect},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},e._l(t.list,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)],1):e._e(),e._v(" "),"datetime"===t.type?n("bk-form-item",{attrs:{label:t.name}},[n("bk-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:t.placeholder,type:"datetimerange"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),e._v(" "),"cascade"===t.type?n("bk-form-item",{attrs:{label:t.name}},[n("common-cascade",{staticStyle:{width:"100%"},attrs:{options:t.list,iscollect_first:!1,iscollect_two:!1,"isshow-number":!1,isactive:!0},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e(),e._v(" "),"member"===t.type?n("bk-form-item",{attrs:{label:t.name}},[n("member-select",{attrs:{multiple:!1},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1):e._e()],1)})),0),e._v(" "),n("div",{staticClass:"bk-filter-btn"},[n("bk-button",{attrs:{theme:"primary",title:e.$t("m.deployPage['查询']")},on:{click:e.searchContent}},[e._v("\n                    "+e._s(e.$t('m.deployPage["查询"]'))+"\n                ")]),e._v(" "),n("bk-button",{attrs:{theme:"default",title:e.$t("m.deployPage['清空']")},on:{click:e.clearSearch}},[e._v("\n                    "+e._s(e.$t('m.deployPage["清空"]'))+"\n                ")])],1)],1):e._e()])],1)},a=[];i._withStripped=!0},"11QV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=k(n("jWXv")),a=k(n("rfXi")),r=k(n("P2sY")),o=k(n("QbLZ")),s=k(n("gDS+")),c=k(n("GQeE")),l=k(n("14Xm")),f=k(n("D3Ub")),u=k(n("PaSM")),d=k(n("Y6/M")),p=k(n("JGQq")),m=k(n("lAAG")),h=k(n("qVGl")),b=k(n("XDfz")),_=k(n("2Vgw")),y=n("ughI"),v=n("CeR/");function k(e){return e&&e.__esModule?e:{default:e}}t.default={name:"addField",components:{dataSource:d.default,dataContent:p.default,customTableData:m.default,defaultValue:h.default,hiddenConditions:b.default},mixins:[u.default],props:{formAlign:{type:String,default:"vertical"},changeInfo:{type:Object,default:function(){return{}}},workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},sospInfo:{type:Object,default:function(){return{}}},addOrigin:{type:Object,default:function(){return{isOther:!1,addOriginInfo:{}}}},isEditPublic:{type:Boolean,default:!1},templateStage:{type:String,default:""},templateInfo:{type:Object,default:function(){return{}}},autoSelectedType:{type:Boolean,default:!0},nodesList:Array},data:function(){return{isDataLoading:!1,trueStatus:!0,falseStatus:!1,secondClick:!1,isPublicField:!1,formInfo:{prevId:"",name:"",key:"",type:"",regex:"",regex_config:{rule:{expressions:[],type:"and"}},customRegex:"",source_type:"",source_uri:"",default_value:"",layout:"",validate:"",desc:"",is_tips:!1,tips:"",show_type:!1,show_conditions:{}},regexFieldList:[],allBetweenList:[{id:1,available:"INT",name:this.$t("m.common['大于']"),typeName:">"},{id:2,available:"INT",name:this.$t("m.common['小于']"),typeName:"<"},{id:3,available:"INT",name:this.$t("m.common['不大于']"),typeName:"<="},{id:4,available:"INT",name:this.$t("m.common['不小于']"),typeName:">="},{id:5,available:"DATE",name:this.$t("m.common['早于']"),typeName:"<"},{id:6,available:"DATE",name:this.$t("m.common['晚于']"),typeName:">"},{id:7,available:"DATE",name:this.$t("m.common['不早于']"),typeName:">="},{id:8,available:"DATE",name:this.$t("m.common['不晚于']"),typeName:"<="}],betweenList:[],customTableInfo:{list:[{name:"",display:"input",choice:"",required:!1,nameCheck:!1,check:!1}]},prevNodeList:[],frontNodesList:[],regexList:[],showType:{sourceList:["SELECT","MULTISELECT","CHECKBOX","RADIO","TABLE","TREESELECT","INPUTSELECT"],belongDefaultList:["STRING","TEXT","INT","DATE","DATETIME","DATETIMERANGE","SELECT","MULTISELECT","CHECKBOX","RADIO","MEMBER","MEMBERS","INPUTSELECT","RICHTEXT","CUSTOM-FORM"],multipleList:["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"],layoutList:["TABLE","CUSTOMTABLE","RICHTEXT","CUSTOM-FORM"]},rules:{},assignValue:{},fieldInfo:{list:[{name:"",key:"",required:!1}]},apiDetail:{},apiInfo:{api_info:{remote_system_id:"",remote_api_id:"",req_params:{},req_body:{},rsp_data:""},kv_relation:{key:"",name:""}},dictionaryData:{list:[],check:""},prcData:{list:[],check:""},prcTable:[],fileList:[],fileVal:"",checkStatus:{customStatus:!1,customTableStatus:!1,customFormStatus:!1},fieldTypeList:[]}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){var e=this;return(0,f.default)(l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isDataLoading=!0,t.next=3,e.initData();case 3:e.rules.name=e.checkCommonRules("name").name,e.rules.key=e.checkCommonRules("key").key,e.rules.type=e.checkCommonRules("select").select,e.rules.tips=e.checkCommonRules("select").select,e.rules.prevId=e.checkCommonRules("select").select,e.isDataLoading=!1,"add"===e.changeInfo.id&&e.autoSelectedType&&e.changeType();case 10:case"end":return t.stop()}}),t,e)})))()},methods:{fieldNameChange:function(){var e=this.$refs.fieldForm.$data.formItems.find((function(e){return"key"===e.property}));e.fieldValue&&(e.validator.content="",e.validator.state="")},initData:function(){var e=this;this.fieldTypeList=this.globalChoise.field_type.filter((function(e){return"DATETIMERANGE"!==e.typeName})),"COMPLEX-MEMBERS"!==this.changeInfo.type&&"SOPS_TEMPLATE"!==this.changeInfo.type||"templateField"!==this.addOrigin.addOriginInfo.type||(this.fieldTypeList=this.fieldTypeList.concat([{name:this.$t("m.common['复杂人员选择']"),typeName:"COMPLEX-MEMBERS"},{name:this.$t("m.common['标准运维模板']"),typeName:"SOPS_TEMPLATE"}])),this.globalChoise.source_type.forEach((function(t){var n="CUSTOM"===t.typeName?e.$t("m.treeinfo['自定义数据每行的name和key都不能相同。']"):e.$t("m.treeinfo['接口中的数据详情']");e.$set(t,"desc",n)})),this.nodesList?this.frontNodesList=this.nodesList:this.getFrontNodesList(),this.assignmentData(),this.changeRegex("ASSOCIATED_FIELD_VALIDATION"),this.getRegexList(),this.getRpcList(),this.getSysDictList(),this.getPreStates()},assignmentData:function(e){var t=this,n=e||this.changeInfo;if(this.formInfo.name=n.name,this.formInfo.key=n.key,this.formInfo.type=n.type,this.formInfo.regex=n.regex,"CUSTOM"===this.formInfo.regex&&(this.formInfo.customRegex=n.custom_regex||""),n.regex_config&&n.regex_config.rule&&(this.changeRegex("ASSOCIATED_FIELD_VALIDATION"),this.formInfo.regex_config.rule.type=n.regex_config.rule.type,this.formInfo.regex_config=n.regex_config),this.formInfo.layout=n.layout,this.formInfo.validate=n.validate_type,this.formInfo.desc=n.desc,this.formInfo.is_tips=n.is_tips,this.formInfo.tips=n.tips,this.formInfo.default_value=this.showType.multipleList.some((function(e){return e===n.type}))&&""!==n.default?n.default.split(","):n.default||"",this.formInfo.source_type=n.source_type,"CUSTOM"===n.source_type)if("FILE"===n.type)for(var i in n.choice)this.fileList.push(n.choice[i]);else 0!==n.choice.length&&(this.fieldInfo.list=[],n.choice.forEach((function(e){t.fieldInfo.list.push({name:e.name,key:e.key,required:!!e.required,nameCheck:!1,keyCheck:!1})})));else"API"===this.formInfo.source_type?this.apiInfo.api_info=n.api_info:"DATADICT"===this.formInfo.source_type?(this.formInfo.source_uri=n.source_uri,this.dictionaryData.check=this.formInfo.source_uri):"RPC"===this.formInfo.source_type&&(this.formInfo.source_uri=n.source_uri,this.prcData.check=n.source_uri);this.formInfo.show_type=0===n.show_type,this.formInfo.show_conditions=n.show_conditions||{},"CUSTOMTABLE"===this.formInfo.type&&(this.customTableInfo.list=[],n.meta.columns.forEach((function(e){var n=[];e.choice.forEach((function(e){n.push(e.name)})),t.customTableInfo.list.push({name:e.name,display:e.display,choice:n.join("\n"),required:e.required,nameCheck:!1,check:!1})}))),(0,c.default)(this.sospInfo).length&&(this.formInfo.name=this.sospInfo.name||"",this.formInfo.validate="REQUIRE"),this.assignValue=JSON.parse((0,s.default)(n))},getFrontNodesList:function(){var e=this;return(0,f.default)(l.default.mark((function t(){var n,i;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state||e.templateInfo.id){t.next=2;break}return t.abrupt("return");case 2:return n="",i={},e.state&&(n="apiRemote/get_related_fields",i.workflow=e.workflow,i.state=e.state),e.templateInfo.id&&(n="taskTemplate/getFrontFieldsList",i.id=e.templateInfo.id,i.stage=e.templateStage),t.next=8,e.$store.dispatch(n,i).then((function(t){e.frontNodesList=t.data})).catch((function(t){(0,v.errorHandler)(t,e)}));case 8:case"end":return t.stop()}}),t,e)})))()},addExpression:function(){this.formInfo.regex_config.rule.expressions.push({condition:"",key:"",source:"field",type:this.formInfo.type,value:""})},deleteExpression:function(e){1!==this.formInfo.regex_config.rule.expressions.length&&this.formInfo.regex_config.rule.expressions.splice(e,1)},changeType:function(e){var t=this;return(0,f.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formInfo.regex="EMPTY",t.formInfo.customRegex="",t.showType.layoutList.includes(t.formInfo.type)&&(t.formInfo.layout="COL_12"),t.formInfo.field="",t.dictionaryData.check="","TREESELECT"===t.formInfo.type?t.formInfo.source_type="DATADICT":t.formInfo.source_type="CUSTOM",t.fieldInfo.list.length||(t.fieldInfo.list=[{name:"",key:"",required:!1,nameCheck:!1,keyCheck:!1}]),"CUSTOM-FORM"===t.formInfo.type&&(t.formInfo.default_value=y.CUSTOM_FORM_DEFAULT_VALUE),e.next=10,t.getRegexList();case 10:t.formInfo.regex_config.rule.expressions=[];case 11:case"end":return e.stop()}}),e,t)})))()},changeRegex:function(e){var t=this;this.formInfo.customRegex="","ASSOCIATED_FIELD_VALIDATION"===e&&(this.regexFieldList=this.frontNodesList.filter((function(e){return"INT"===t.formInfo.type?e.type===t.formInfo.type:"DATE"===e.type||"DATETIME"===e.type})).filter((function(e){return e.id!==t.changeInfo.id})),["DATE","DATETIME"].includes(this.formInfo.type)&&this.regexFieldList.push({name:"系统时间",id:"system_time",key:"system_time",source:"system"}),this.betweenList=this.allBetweenList.filter((function(e){return"INT"===t.formInfo.type?"INT"===e.available:"DATE"===e.available})),this.betweenList.push({name:"等于",typeName:"=="}),this.formInfo.regex_config.rule.expressions.length||this.addExpression())},getRegexList:function(){var e=this,t=this.formInfo.type;this.$store.dispatch("cdeploy/regexList",t).then((function(t){e.regexList=t.data.regex_choice.map((function(t){return{name:t[1]?t[1]:e.$t('m.treeinfo["无"]'),typeName:t[0]}}))})).catch((function(t){(0,v.errorHandler)(t,e)}))},onRegexFieldChange:function(e,t){t.source=["system_time"].includes(e)?"system":"field"},relateSelected:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t[2].type=t[1].type,t[2].source=t[1].source},putKey:function(){var e=this;"number"!=typeof this.changeInfo.id&&(this.formInfo.key="",(0,_.default)(this.formInfo.name,{style:_.default.STYLE_NORMAL,heteronym:!1}).forEach((function(t){e.formInfo.key=e.formInfo.key+""+t})),this.formInfo.key=this.formInfo.key.toUpperCase(),this.formInfo.key=this.formInfo.key.replace(/\ /g,"_"),this.formInfo.key.length>=32&&(this.formInfo.key=this.formInfo.key.substr(0,32)))},changeApiInfo:function(e){this.apiDetail=e},getRpcData:function(e){this.prcTable=e},handleFile:function(e){for(var t=this,n=e.target.files[0],i=n.size/1024,a=n.name,r=0;r<this.fileList.length;r++)if(a===this.fileList[r].name)return void this.$bkMessage({message:this.$t('m.treeinfo["此文件已经上传"]'),theme:"error"});if(i<=1e5){var s=new FormData;s.append("field_file",n),this.$store.dispatch("cdeploy/fileUpload",{data:s}).then((function(e){for(var n in e.data.succeed_files)t.fileList.push((0,o.default)({},e.data.succeed_files[n],{key:n}));t.fileVal="",t.$bkMessage({message:t.$t('m.treeinfo["上传成功"]'),theme:"success"})})).catch((function(e){(0,v.errorHandler)(e,t)}))}else this.fileVal="",this.$bkMessage({message:this.$t('m.treeinfo["该文件大小超过100MB！"]'),theme:"error"})},deleteFile:function(e,t){this.fileList.splice(t,1)},addField:function(){var e=this;return(0,f.default)(l.default.mark((function t(){var n,i,a,o;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataContent();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(!e.secondClick){t.next=7;break}return t.abrupt("return");case 7:e.secondClick=!0,"number"==typeof e.changeInfo.id?(i=e.changeInfo.id,a="TABLE"===e.changeInfo.source?"cdeploy/changeNewModuleField":"cdeploy/changeNewField",e.addOrigin.isOther&&e.addOrigin.addOriginInfo.updateUrl&&(a=e.addOrigin.addOriginInfo.updateUrl,"templateField"===e.addOrigin.addOriginInfo.type&&(n.task_schema_id=e.templateInfo.id,n.stage=e.templateStage,"COMPLEX-MEMBERS"!==n.type&&"SOPS_TEMPLATE"!==n.type||delete n.type)),e.changeInfo.project_key&&(n.project_key=e.changeInfo.project_key),e.$store.dispatch(a,{params:n,id:i}).then((function(t){e.$bkMessage({message:e.$t('m.treeinfo["修改成功"]'),theme:"success"}),e.$emit("closeShade"),e.addOrigin.isOther&&e.addOrigin.addOriginInfo.updateUrl&&"templateField"!==e.addOrigin.addOriginInfo.type&&e.$parent.$parent.getList?e.$parent.$parent.getList():e.$parent.$parent.getTableList?e.$parent.$parent.getTableList():e.$emit("getRelatedFields"),e.$emit("onConfirm",(0,r.default)({},e.changeInfo,n))})).catch((function(t){(0,v.errorHandler)(t,e)})).finally((function(){e.secondClick=!1}))):(n.state=e.state,(0,c.default)(e.sospInfo).length&&(n.state=e.formInfo.prevId),o="cdeploy/addNewField",e.addOrigin.isOther&&e.addOrigin.addOriginInfo.addUrl&&(o=e.addOrigin.addOriginInfo.addUrl,"templateField"===e.addOrigin.addOriginInfo.type&&(n.task_schema_id=e.templateInfo.id,n.stage=e.templateStage)),e.changeInfo.project_key&&(n.project_key=e.changeInfo.project_key),e.$store.dispatch(o,{params:n}).then((function(t){e.addNew=t.data,e.$bkMessage({message:e.$t('m.treeinfo["新增成功"]'),theme:"success"}),e.$emit("closeShade"),e.addOrigin.isOther&&e.addOrigin.addOriginInfo.addUrl?"templateField"===e.addOrigin.addOriginInfo.type&&e.$parent.$parent.getTableList?e.$parent.$parent.getTableList():e.$parent.$parent.getList&&e.$parent.$parent.getList():e.$parent.$parent.getTableList?e.$parent.$parent.getTableList():(e.$emit("getRelatedFields"),e.$parent.$parent.showNew&&e.$parent.$parent.showNew(e.sospInfo,t)),e.$emit("onConfirm",t.data)})).catch((function(t){(0,v.errorHandler)(t,e)})).finally((function(){e.secondClick=!1})));case 9:case"end":return t.stop()}}),t,e)})))()},onCancelClick:function(){this.$emit("closeShade"),this.$emit("onCancel")},checkInfo:function(){var e=this;this.$refs.fieldForm.validate().then((function(t){e.$refs.dataSource&&e.$refs.dataSource.checkSouce()||e.checkField()||(!e.formInfo.is_tips||e.formInfo.tips?e.addField():e.$bkMessage({theme:"warning",message:e.$t('m.treeinfo["字段释疑为必填项"]')}))}),(function(e){console.error(e)}))},getDataContent:function(){var e=this;return(0,f.default)(l.default.mark((function t(){var n,r,o,s,c,f;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n={}).layout=e.formInfo.layout,n.validate_type=e.formInfo.validate,n.regex=e.formInfo.regex,n.regex_config=e.formInfo.regex_config,n.default="",e.showType.belongDefaultList.some((function(t){return t===e.formInfo.type}))&&(o=[],(r=["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"]).some((function(t){return t===e.formInfo.type}))&&e.formInfo.default_value&&(o=e.formInfo.default_value.filter((function(e){return""!==e}))),n.default=r.some((function(t){return t===e.formInfo.type}))?o.join(","):e.formInfo.default_value),!e.$refs.hiddenConditions){t.next=16;break}if(!e.$refs.hiddenConditions.checkList()){t.next=10;break}return t.abrupt("return",!1);case 10:s=e.$refs.hiddenConditions.listInfo,n.show_conditions={type:e.$refs.hiddenConditions.conditionType,expressions:[]},s.forEach((function(e){n.show_conditions.expressions.push({key:e.key,condition:e.condition,value:Array.isArray(e.value)?e.value.join(","):e.value,type:e.type})})),n.show_type=0,t.next=18;break;case 16:n.show_type=1,n.show_conditions={};case 18:if("TABLE"===e.changeInfo.source){t.next=61;break}if(n.workflow=e.workflow,n.name=e.formInfo.name,n.key=e.formInfo.key,n.type=e.formInfo.type,n.desc=e.formInfo.desc,n.source_type=e.formInfo.source_type||"CUSTOM",n.custom_regex=e.formInfo.customRegex,n.is_tips=e.formInfo.is_tips,n.tips=e.formInfo.tips,"FILE"!==e.formInfo.type){t.next=33;break}n.choice={},e.fileList.forEach((function(t){e.$set(n.choice,t.key,t)})),t.next=50;break;case 33:if("CUSTOM"!==e.formInfo.source_type){t.next=38;break}n.choice=[],"SELECT"===e.formInfo.type||"MULTISELECT"===e.formInfo.type||"CHECKBOX"===e.formInfo.type||"RADIO"===e.formInfo.type||"INPUTSELECT"===e.formInfo.type?e.fieldInfo.list.forEach((function(e){n.choice.push({key:e.key,name:e.name})})):"TABLE"===e.formInfo.type&&e.fieldInfo.list.forEach((function(e){n.choice.push({key:e.key,name:e.name,required:e.required})})),t.next=50;break;case 38:if("API"!==e.formInfo.source_type){t.next=49;break}if("API"!==e.formInfo.source_type){t.next=45;break}return t.next=42,e.$refs.dataContent[0].apiFz();case 42:if(t.sent){t.next=45;break}return t.abrupt("return",!1);case 45:n.api_info=e.apiInfo.api_info,n.kv_relation=e.apiInfo.kv_relation,t.next=50;break;case 49:"DATADICT"===e.formInfo.source_type&&(n.choice=[],n.source_uri=e.dictionaryData.check);case 50:if("CUSTOMTABLE"!==e.formInfo.type){t.next=60;break}if(e.customTableInfo.list.forEach((function(e){var t=[];!e.choice||"select"!==e.display&&"multiselect"!==e.display||(t=e.choice.split("\n").filter((function(e){return e.length>0}))),e.nameCheck=0===e.name.length||e.name.length>120,e.check=!t.length&&("select"===e.display||"multiselect"===e.display)})),c=e.customTableInfo.list.some((function(e){return e.nameCheck})),f=e.customTableInfo.list.some((function(e){return e.check})),!c&&!f){t.next=57;break}return e.$bkMessage({theme:"warning",message:e.$t('m.treeinfo["请填写正确格式的自定义数据"]')}),t.abrupt("return",!1);case 57:n.meta={},n.meta.columns=[],e.customTableInfo.list.forEach((function(e){var t=e.choice.split("\n").filter((function(e){return e.length>0}));t=(0,a.default)(new i.default(t)),n.meta.columns.push({name:e.name,display:e.display,choice:e.choice.length?t:[],required:e.required})}));case 60:"RPC"===e.formInfo.source_type&&(n.source_uri=e.prcData.check,n.meta={},e.prcTable.forEach((function(e){var t="CUSTOM"===e.source_type?e.value:"${params_"+e.value_key+"}";n.meta[e.name]=t})));case 61:return t.abrupt("return",e.timeConversion(n));case 62:case"end":return t.stop()}}),t,e)})))()},timeConversion:function(e){var t=this;return""!==e.default&&("DATE"!==e.type&&"DATETIME"!==e.type||(e.default="DATE"===e.type?this.standardDayTime(e.default):this.standardTime(e.default))),e.show_conditions&&e.show_conditions.expressions&&e.show_conditions.expressions.length&&e.show_conditions.expressions.forEach((function(e){"DATE"!==e.type&&"DATETIME"!==e.type||(e.value="DATE"===e.type?t.standardDayTime(e.value):t.standardTime(e.value))})),e},checkField:function(){var e=this;this.checkStatus.customStatus=!1,this.checkStatus.customTableStatus=!1,this.checkStatus.customFormStatus=!1;if(["SELECT","MULTISELECT","CHECKBOX","RADIO","TABLE"].some((function(t){return e.formInfo.type===t}))&&"CUSTOM"===this.formInfo.source_type&&(this.fieldInfo.list.forEach((function(e){e.nameCheck=e.name.length>120||0===e.name.length,e.keyCheck=!/^[a-zA-Z0-9_]+$/.test(e.key)})),this.fieldInfo.list.forEach((function(t,n){e.fieldInfo.list.forEach((function(e,i){n!==i&&(e.key===t.key&&(t.keyCheck=!0),e.name===t.name&&(t.nameCheck=!0))}))})),this.checkStatus.customStatus=this.fieldInfo.list.some((function(e){return e.nameCheck||e.keyCheck}))),"CUSTOMTABLE"===this.formInfo.type&&(this.customTableInfo.list.forEach((function(e){var t=[];!e.choice||"select"!==e.display&&"multiselect"!==e.display||(t=e.choice.split("\n").filter((function(e){return e.length>0}))),e.nameCheck=0===e.name.length||e.name.length>120,e.check=!t.length&&("select"===e.display||"multiselect"===e.display)})),this.checkStatus.customTableStatus=this.customTableInfo.list.some((function(e){return e.nameCheck||e.check}))),"CUSTOM-FORM"===this.formInfo.type)try{var t=JSON.parse(this.formInfo.default_value);t&&(this.checkStatus.customFormStatus=!t.schemes||!t.form_data)}catch(e){this.checkStatus.customFormStatus=!0}return this.checkStatus.customStatus||this.checkStatus.customTableStatus||this.checkStatus.customFormStatus},getRpcList:function(){var e=this;this.$store.dispatch("datadict/getPrcData").then((function(t){e.prcData.list=t.data,e.prcData.list.filter((function(t){return t.key===e.prcData.check})).length&&(e.prcTable=e.prcData.list.filter((function(t){return t.key===e.prcData.check}))[0].req_params)})).catch((function(t){(0,v.errorHandler)(t,e)}))},getSysDictList:function(){var e=this;this.$store.dispatch("datadict/list",{}).then((function(t){e.dictionaryData.list=t.data.filter((function(e){return e.is_enabled}))})).catch((function(t){(0,v.errorHandler)(t,e)}))},getPreStates:function(){var e=this;this.state&&this.$store.dispatch("deployCommon/getPreStates",{id:this.state}).then((function(t){e.prevNodeList=t.data})).catch((function(t){(0,v.errorHandler)(t,e)}))}}}},"429m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("14Xm")),a=r(n("D3Ub"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={name:"getRpcParam",components:{},props:{prcTable:{type:Array,default:function(){return[]}},changeInfo:{type:Object,default:function(){return{}}},stateList:{type:Array,default:function(){return[]}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}]}},computed:{},watch:{prcTable:function(e,t){this.initData()}},mounted:function(){var e=this;return(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeInfo;case 2:e.initData();case 3:case"end":return t.stop()}}),t,e)})))()},methods:{initData:function(){var e=this;this.prcTable.forEach((function(t){for(var n in e.$set(t,"isCheck",!1),e.$set(t,"isSatisfied",!1),e.$set(t,"el",null),e.$set(t,"source_type","CUSTOM"),e.$set(t,"value_key",""),e.changeInfo.meta)t.name===n&&(-1!==e.changeInfo.meta[n].indexOf("{params_")?(t.source_type="FIELDS",t.value_key=e.changeInfo.meta[n].split("${params_")[1].split("}")[0]):(t.source_type="CUSTOM",t.value=e.changeInfo.meta[n]))}))}}}},"4lVZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n("m1cH")),a=u(n("14Xm")),r=u(n("gDS+")),o=u(n("GQeE")),s=u(n("D3Ub")),c=u(n("BkRI")),l=u(n("VflG")),f=u(n("9ZYk"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"responseData",components:{exportTree:f.default},mixins:[l.default],props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},remoteApiIid:{type:[String,Number],default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{organization:{processorPerson:[],processorTree:{},assignorPerson:[],assignorTree:{}},organizaInfo:{assignorShow:[!1,!1,!1]},cascaderData:[],bodyTableData:[],responseTableData:[],paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')},selectInfo:{selectkeylist:[],selectkey:"",selectvaluelist:[],selectvalue:""},isShow:!1,tampFormInfo:{ancestorsList_str:"",isSelectedKey:"",isSelectedValue:"",settingKeyName:"",settingValueName:""},isCheck:!1,maxLevel:1,maxLevelTree:[1,1,1],settingKeyName:"",settingValueName:""}},computed:{},watch:{"apiDetail.rsp_data":{handler:function(e,t){this.initData()},deep:!0}},mounted:function(){this.initData()},methods:{initData:function(){this.responseTableDataChange()},responseTableDataChange:function(){var e=this;return(0,s.default)(a.default.mark((function t(){var n,i,l,f,u,d,p,m;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.selectInfo={selectkeylist:[],selectkey:"",selectvaluelist:[],selectvalue:""},e.organization={processorPerson:[],processorTree:{},assignorPerson:[],assignorTree:{}},e.maxLevel=1,e.maxLevelTree=[1,1,1],e.settingKeyName="",e.settingValueName="",t.next=8,e.changeInfo;case 8:if((0,o.default)(e.apiDetail.rsp_data).length){t.next=13;break}e.apiDetail.responseTreeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:e.$t('m.treeinfo["初始化数据"]'),parentInfo:"",children:[]}],e.apiDetail.responseTableData=[],t.next=19;break;case 13:return t.next=15,e.jsonschemaToList({root:JSON.parse((0,r.default)(e.apiDetail.rsp_data))});case 15:return e.apiDetail.responseTreeDataList=t.sent,t.next=18,e.treeToTableList(JSON.parse((0,r.default)(e.apiDetail.responseTreeDataList[0].children)));case 18:e.apiDetail.responseTableData=t.sent;case 19:return t.next=21,JSON.parse((0,r.default)(e.apiDetail.responseTableData));case 21:return n=t.sent,t.next=24,n.forEach((function(t){t.children=[],t.source_type="CUSTOM",t.value="",t.name=t.key,t.isSelectAbled=!1,t.isSelectedKey=!1,t.isSelectedKeyDisabled=!1,t.isSelectedValue=!1,t.isSelectedValueDisabled=!e.changeInfo.api_info}));case 24:return t.next=26,e.recordChildren(n);case 26:return t.next=28,e.recordParent(n);case 28:return t.next=30,e.showSelectAbled(n);case 30:return i=t.sent,t.next=33,i.forEach(function(){var t=(0,s.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.markCanUseArray(n);case 2:case"end":return t.stop()}}),t,e)})));return function(e){return t.apply(this,arguments)}}());case 33:return t.next=35,n;case 35:return e.responseTableData=t.sent,l=e.responseTableData.filter((function(e){return!e.level&&"data"===e.key})),t.next=39,e.makeArrayTree(l);case 39:if(e.cascaderData=t.sent,e.organization.assignorPerson=e.cascaderData[0]||[],!e.changeInfo.api_info||e.changeInfo.api_info.remote_api_id!==e.apiDetail.id){t.next=64;break}return t.next=44,e.changeInfo.api_info.rsp_data.split(".");case 44:return f=t.sent,t.next=47,f.map((function(e,t){return e=t+"_"+e}));case 47:return u=t.sent,d=u.length+"_items_0",u.push(d),p=u.toString()+","+u.length+"_"+e.changeInfo.kv_relation.key,m=u.toString()+","+u.length+"_"+e.changeInfo.kv_relation.name,e.tampFormInfo.ancestorsList_str=u.toString(),e.responseTableData.forEach((function(t){t.ancestorsList_str===p&&(t.isSelectedKey=!0,e.tampFormInfo.isSelectedKey=t.ancestorsList_str,e.tampFormInfo.settingKeyName=t.name),t.ancestorsList_str===m&&(t.isSelectedValue=!0,e.tampFormInfo.isSelectedValue=t.ancestorsList_str,e.tampFormInfo.settingValueName=t.name)})),t.next=56,e.organization.assignorPerson.forEach((function(t){e.treeData(t,"assignors")}));case 56:e.selectInfo.selectkeylist=e.responseTableData.filter((function(e){return e.ancestorsList.join()===u.join()})),e.selectInfo.selectkey=e.tampFormInfo.isSelectedKey,e.selectInfo.selectvaluelist=(0,c.default)(e.selectInfo.selectkeylist),e.selectInfo.selectvalue=e.tampFormInfo.isSelectedValue,e.settingValueName=e.tampFormInfo.settingValueName,e.settingKeyName=e.tampFormInfo.settingKeyName,e.giveFirstCheckInfo(e.selectInfo.selectkeylist,p),e.giveFirstCheckInfo(e.selectInfo.selectvaluelist,m);case 64:case"end":return t.stop()}}),t,e)})))()},giveFirstCheckInfo:function(e,t){var n=this;e.forEach((function(e){e.ancestorsList_str===t&&(e.checkInfo=!0),e.has_children&&e.children.length&&"object"===e.type&&n.giveFirstCheckInfo(e.children,t)}))},treeData:function(e,t){var n=this;e.checkInfo=!1,e.has_children=!(!e.children||!e.children.length),e.showChildren=!0,String(this.tampFormInfo.ancestorsList_str.split(",").slice(0,-1).toString())===String(e.ancestorsList_str)&&"assignors"===t&&(e.checkInfo=!0,this.organization.assignorTree=e),e.has_children&&e.children.forEach((function(e){n.treeData(e,t)}))},recordChildren:function(e,t){var n=e.map((function(e){return e.level}));this.maxLevel=Math.max.apply(Math,(0,i.default)(n));for(var a=function(t){e.filter((function(e){return e.level===t})).forEach((function(t){!function(e,t){e.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0].children.push(t)}(e,t)}))},r=this.maxLevel;r>(t||0);r--)a(r)},recordParent:function(e,t){for(var n=this.maxLevel,i=function(t){e.filter((function(e){return e.level===t})).forEach((function(t){!function(e,t){t.level?t.parentInfo=e.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0]:t.parentInfo=""}(e,t)}))},a=0;a<=(t||n);a++)i(a)},markCanUseArray:function(e){e.isCanUseArray=!0,e.level&&this.markCanUseArray(e.parentInfo)},makeArrayTree:function(e){var t=[];return function e(t,n){n.forEach((function(i){n.name=i.name,n.isSelect=!1,n.ancestorsList_str=i.ancestorsList_str;var a=i.children;n.children=[],t.push(n),a&&a.length&&e(n.children,a)}))}(t,e),t},changeState:function(e){e.showChildren=!e.showChildren,e.children.forEach((function(t){t.isShow=e.showChildren})),e.showChildren||this.closeChildren(e)},closeChildren:function(e){var t=this;e.children.forEach((function(e){e.isShow=!1,e.has_children&&(e.showChildren=!1,t.closeChildren(e))}))},changeType:function(e){},selectOneKey:function(e){var t=e.isSelectedKey;this.responseTableData.forEach((function(e){e.isSelectedKey=!1})),e.isSelectedKey=!t,this.responseTableData.filter((function(e){return e.isSelectAbled})).forEach((function(t){t.isSelectedKeyDisabled=!1,t.isSelectedValueDisabled=t.parentInfo!==e.parentInfo})),this.responseTableData.filter((function(t){return t.isSelectAbled&&t.parentInfo!==e.parentInfo})).forEach((function(e){e.isSelectedValue=!1}))},selectOneValue:function(e){var t=e.isSelectedValue;this.responseTableData.forEach((function(e){e.isSelectedValue=!1})),e.isSelectedValue=!t},countArrayAncestors:function(e){var t=[];return function e(n){"array"===n.parentInfo.type&&(t.push(n.parentInfo),e(n.parentInfo)),"object"===n.parentInfo.type&&e(n.parentInfo)}(e),t},showSelectAbled:function(e){var t=this;return(0,s.default)(a.default.mark((function n(){var i,r;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],r=e.filter((function(e){return"array"!==e.type&&"object"!==e.type&&e.level&&(!e.children||!e.children.length)&&-1!==e.ancestorsList.indexOf("0_data")})),r.filter((function(e){var n=t.countArrayAncestors(e),a=1===n.length&&("array"===e.parentInfo.type||"array"===e.parentInfo.parentInfo.type);return a&&-1===i.indexOf(n[0])&&i.push(n[0]),a})).forEach((function(e){e.isSelectAbled=!0})),n.abrupt("return",i);case 5:case"end":return n.stop()}}),n,t)})))()},showTree:function(e){if(e){var t=this.selectInfo.selectkeylist.map((function(e){return e.level}));this.$set(this.maxLevelTree,1,Math.max.apply(Math,(0,i.default)(t))-1),this.$set(this.maxLevelTree,2,Math.max.apply(Math,(0,i.default)(t))-1)}else{var n=this.organization.assignorPerson.map((function(e){return e.level}));this.$set(this.maxLevelTree,0,Math.max.apply(Math,(0,i.default)(n))-1)}for(var a=this.organizaInfo.assignorShow[e],r=0;r<3;r++)this.$set(this.organizaInfo.assignorShow,r,!1);this.$set(this.organizaInfo.assignorShow,e,!a)},closeOther0:function(){this.$set(this.organizaInfo.assignorShow,0,!1)},closeOther1:function(){this.$set(this.organizaInfo.assignorShow,1,!1)},closeOther2:function(){this.$set(this.organizaInfo.assignorShow,2,!1)},recordCheckFn:function(e){var t=this;e.checkInfo=!1,null==e.children||e.children&&!e.children.length||e.children.forEach((function(e){t.recordCheckFn(e)}))},assignorToggle:function(e,t){var n=this;"object"===e.type||t&&"array"===e.type||(t?1===t?(this.selectInfo.selectkeylist.forEach((function(e){n.recordCheckFn(e)})),this.selectInfo.selectkey=e.ancestorsList_str,this.settingKeyName=e.name,this.responseTableData.forEach((function(e){e.isSelectedKey=!1})),this.responseTableData.filter((function(t){return t.ancestorsList_str===e.ancestorsList_str}))[0].isSelectedKey=!0):(this.selectInfo.selectvaluelist.forEach((function(e){n.recordCheckFn(e)})),this.selectInfo.selectvalue=e.ancestorsList_str,this.settingValueName=e.name,this.responseTableData.forEach((function(e){e.isSelectedValue=!1})),this.responseTableData.filter((function(t){return t.ancestorsList_str===e.ancestorsList_str}))[0].isSelectedValue=!0):(this.organization.assignorPerson.forEach((function(e){n.recordCheckFn(e)})),this.selectInfo.selectkeylist=e.children[0].children,this.selectInfo.selectvaluelist=(0,c.default)(this.selectInfo.selectkeylist),this.organization.assignorTree=e,this.tampFormInfo.assignors=e.id,this.checkInfo.assignors=!1),e.checkInfo=!0,this.closeTree(t))},closeTree:function(e){this.$set(this.organizaInfo.assignorShow,e,!1)},toggleChildren:function(){arguments[0].showChildren=!arguments[0].showChildren}}}},"5MDp":function(e,t,n){},"5R8N":function(e,t,n){"use strict";n.r(t);var i=n("RkdA"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},"7XAC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("2eEL"),r=(i=a)&&i.__esModule?i:{default:i};t.default={name:"exportTree",components:{collapseTransition:r.default},props:{treeDataList:{type:Array,default:function(){return[]}},treeIndex:{type:Number,default:0},isKeyValue:{type:Number,default:0}},data:function(){return{pLeft:"padding-left:"+25*(this.treeIndex+1)+"px; padding-right: 10px;"}},methods:{toggleChildren:function(e){this.$emit("toggleChildren",e)},toggle:function(e){this.$emit("toggle",e,this.isKeyValue)},checkItem:function(e){this.$emit("selectItem",e)},selectItem:function(e){this.$emit("selectItem",e)}}}},"8iia":function(e,t,n){var i=n("QMMT"),a=n("RRc/");e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},"9ZYk":function(e,t,n){"use strict";n.r(t);var i=n("o+k2"),a=n("EQfD");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("o3v5");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"76ad1ee0",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/exportApiTree.vue",t.default=s.exports},"9psX":function(e,t,n){"use strict";n.r(t);var i=n("ptjD"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},"Ah+g":function(e,t,n){"use strict";n.r(t);var i=n("0qOp"),a=n("5R8N");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("xDl+");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"4ac37608",null);s.options.__file="src/views/commonComponent/searchInfo/searchInfo.vue",t.default=s.exports},B9jh:function(e,t,n){"use strict";var i=n("Wu5q"),a=n("n3ko");e.exports=n("raTm")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(a(this,"Set"),e=0===e?0:e,e)}},i)},BkRI:function(e,t,n){var i=n("OBhP");e.exports=function(e){return i(e,5)}},C2SN:function(e,t,n){var i=n("93I4"),a=n("kAMH"),r=n("UWiX")("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),i(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},C6tm:function(e,t,n){"use strict";n.r(t);var i=n("P+p4"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},CjxG:function(e,t,n){"use strict";n.r(t);var i=n("mW7z"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},Du1T:function(e,t,n){"use strict";n.r(t);var i=n("429m"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},EQfD:function(e,t,n){"use strict";n.r(t);var i=n("7XAC"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},EYXk:function(e,t,n){},F5gn:function(e,t,n){},FGMr:function(e,t,n){"use strict";n.r(t);var i=n("/jEY"),a=n("Du1T");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"2c90ff7a",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/getRpcParam.vue",t.default=s.exports},FVR2:function(e,t,n){},FaS7:function(e,t,n){"use strict";n("xMuw")},Ga10:function(e,t,n){},HEg5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"public-field-page"},[t("public-fields",{attrs:{title:this.$t("m['公共字段']")}})],1)},a=[];i._withStripped=!0},Ho96:function(e,t,n){"use strict";n("q9Lf")},JG59:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-itsm-service"},[n("div",{staticClass:"is-title",class:{"bk-title-left":!e.sliderStatus}},[n("p",{staticClass:"bk-come-back"},[e._v("\n            "+e._s(e.title)+"\n        ")])]),e._v(" "),n("div",{staticClass:"itsm-page-content"},[e.projectId&&!e.isDataLoading&&0===e.pagination.count?n("empty-tip",{attrs:{title:e.emptyTip.title,"sub-title":e.emptyTip.subTitle,desc:e.emptyTip.desc,links:e.emptyTip.links}},[n("template",{slot:"btns"},[n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!e.hasPermission(e.createFieldPerm)},expression:"{ active: !hasPermission(createFieldPerm) }"}],class:{"btn-permission-disable":!e.hasPermission(e.createFieldPerm)},attrs:{theme:"primary","data-test-id":"field_button_createField"},on:{click:e.addField}},[e._v("\n                    "+e._s(e.$t('m["立即创建"]'))+"\n                ")])],1)],2):[n("div",{staticClass:"bk-only-btn"},[n("div",{staticClass:"bk-more-search"},[n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!e.hasPermission(e.createFieldPerm,e.curPermission)},expression:"{ active: !hasPermission(createFieldPerm, curPermission) }"}],class:["mr10","plus-cus",{"btn-permission-disable":!e.hasPermission(e.createFieldPerm,e.curPermission)}],attrs:{theme:"primary","data-test-id":"field_button_addField",title:e.$t("m.deployPage['新增']"),icon:"plus"},on:{click:e.addField}},[e._v("\n                        "+e._s(e.$t('m.deployPage["新增"]'))+"\n                    ")]),e._v(" "),n("div",{staticClass:"bk-search-name"},[n("div",{staticClass:"bk-search-content"},[n("bk-input",{attrs:{"data-test-id":"field_input_searchField",clearable:!0,"right-icon":"bk-icon icon-search",placeholder:e.moreSearch[0].placeholder},on:{enter:e.searchContent,clear:e.clearSearch},model:{value:e.moreSearch[0].value,callback:function(t){e.$set(e.moreSearch[0],"value",t)},expression:"moreSearch[0].value"}})],1),e._v(" "),n("bk-button",{staticClass:"ml10 filter-btn",attrs:{title:e.$t("m.deployPage['更多筛选条件']"),icon:" bk-itsm-icon icon-search-more"},on:{click:e.searchMore}})],1)],1),e._v(" "),n("search-info",{ref:"searchInfo",attrs:{"more-search":e.moreSearch}})],1),e._v(" "),n("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isDataLoading},expression:"{ isLoading: isDataLoading }"}],attrs:{data:e.dataList,size:"small",pagination:e.pagination},on:{"sort-change":e.handleSortChange,"page-change":e.handlePageChange,"page-limit-change":e.handlePageLimitChange}},[n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['字段名称']"),"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission(e.editFieldPerm,e.$store.state.project.projectAuthActions.concat(t.row.auth_actions))?n("span",{staticClass:"bk-lable-primary",attrs:{title:t.row.name},on:{click:function(n){return e.openField(t.row)}}},[e._v("\n                            "+e._s(t.row.name)+"\n                        ")]):n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"field_button_viewfield",text:"",theme:"primary"},on:{click:function(n){return e.openField(t.row,e.editFieldPerm)}}},[e._v("\n                            "+e._s(t.row.name)+"\n                        ")])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['唯一标识']"),"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.key}},[e._v(e._s(t.row.key||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['字段类型']"),"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:e.typeTransition(t.row.type)}},[e._v(e._s(e.typeTransition(t.row.type)||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['字段值']"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:e.valueTransition(t.row)}},[e._v(e._s(e.valueTransition(t.row)||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['字段描述']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.desc}},[e._v(e._s(t.row.desc||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['最近更新人']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.updated_by}},[e._v(e._s(t.row.updated_by||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{sortable:"","sort-orders":["descending","ascending",null],label:e.$t("m.treeinfo['最近更新时间']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.update_at}},[e._v(e._s(t.row.update_at||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['操作']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission(e.editFieldPerm,e.$store.state.project.projectAuthActions.concat(t.row.auth_actions))?n("bk-button",{attrs:{"data-test-id":"field_button_editfield",theme:"primary",text:""},on:{click:function(n){return e.openField(t.row)}}},[e._v("\n                            "+e._s(e.$t('m.deployPage["编辑"]'))+"\n                        ")]):n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"field_button_editfield_permission",text:"",theme:"primary"},on:{click:function(n){return e.openField(t.row,e.editFieldPerm)}}},[e._v("\n                            "+e._s(e.$t('m.deployPage["编辑"]'))+"\n                        ")]),e._v(" "),e.hasPermission(e.deleteFieldPerm,e.$store.state.project.projectAuthActions.concat(t.row.auth_actions))?n("bk-button",{attrs:{"data-test-id":"field_button_deletefield",theme:"primary",text:"",disabled:!!t.row.is_builtin},on:{click:function(n){return e.deleteField(t.row)}}},[e._v("\n                            "+e._s(e.$t('m.deployPage["删除"]'))+"\n                        ")]):n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"btn-permission-disable",attrs:{"data-test-id":"field_button_deletefield_permission",text:"",theme:"primary"},on:{click:function(n){return e.deleteField(t.row)}}},[e._v("\n                            "+e._s(e.$t('m.deployPage["删除"]'))+"\n                        ")])]}}])})],1)]],2),e._v(" "),n("div",{staticClass:"bk-add-slider"},[n("bk-sideslider",{attrs:{"is-show":e.sliderInfo.show,title:e.sliderInfo.title,width:e.sliderInfo.width},on:{"update:isShow":function(t){return e.$set(e.sliderInfo,"show",t)},"update:is-show":function(t){return e.$set(e.sliderInfo,"show",t)}}},[e.sliderInfo.show?n("div",{staticClass:"p20",attrs:{slot:"content"},slot:"content"},[n("add-field",{attrs:{"change-info":e.changeInfo,"table-list":e.listInfo,"is-edit-public":e.isEditPublic,workflow:e.workflow,"add-origin":e.addOrigin,state:e.stateId},on:{closeShade:e.closeShade}})],1):e._e()])],1)])},a=[];i._withStripped=!0},JGQq:function(e,t,n){"use strict";n.r(t);var i=n("j/2n"),a=n("qJoz");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("hZSR");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"626bb56a",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/dataContent.vue",t.default=s.exports},LJsK:function(e,t,n){"use strict";n.r(t);var i=n("z/kA"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},LWgf:function(e,t,n){"use strict";n("oiO8")},LgrT:function(e,t,n){},MI7q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n("GQeE")),a=s(n("gDS+")),r=s(n("14Xm")),o=s(n("D3Ub"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:"getParam",components:{},props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},isStatic:{type:Boolean,default:function(){return!1}},isCustom:{type:Boolean,default:function(){return!1}},queryValue:{type:Object,default:function(){return{}}},entry:{type:String,default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')}}},computed:{},watch:{apiDetail:function(e,t){this.initData()}},mounted:function(){var e=this;return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeInfo;case 2:return t.next=4,e.isStatic;case 4:return t.next=6,e.queryValue;case 6:return t.next=8,e.initData();case 8:case"end":return t.stop()}}),t,e)})))()},methods:{initData:function(){var e=this;return(0,o.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JSON.parse((0,a.default)(e.apiDetail.req_params));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return n=t.t0,t.next=8,n.forEach((function(t){if(t.isCheck=!1,t.isSatisfied=!1,t.el=null,t.customValue=t.value||"",t.source_type="CUSTOM",t.value_key="",e.isStatic)t.value=e.queryValue[t.name]||"";else if(e.changeInfo.api_info&&(0,i.default)(e.changeInfo.api_info.req_params).length&&e.changeInfo.api_info.remote_api_id===e.apiDetail.id)if(/^\$\{params_.*\}$/.test(e.changeInfo.api_info.req_params[t.name]))t.source_type="FIELDS",t.value_key=e.changeInfo.api_info.req_params[t.name]?JSON.parse((0,a.default)(e.changeInfo.api_info.req_params[t.name])).replace(/^\$\{params_/,"").replace(/\}$/,""):"";else{var n=e.changeInfo.api_info.req_params[t.name];t.source_type="CUSTOM",t.value=n}}));case 8:return t.next=10,JSON.parse((0,a.default)(n));case 10:e.paramTableData=t.sent;case 11:case"end":return t.stop()}}),t,e)})))()},addNewItem:function(e){this.$emit("addNewItem",e)}}}},NBCF:function(e,t,n){"use strict";n("FVR2")},NGZu:function(e,t,n){"use strict";n.r(t);var i=n("Pe0B"),a=n("VtRw");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("vSlL");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"030ce8aa",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/getParam.vue",t.default=s.exports},"P+p4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("P2sY"),r=(i=a)&&i.__esModule?i:{default:i},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("wsa1"));var s={language:"javascript",theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same"};t.default={name:"CodeEditor",props:{value:{type:String,default:""},options:{type:Object,default:function(){return{}}}},data:function(){return{editorOptions:(0,r.default)({},s,this.options,{value:this.value}),monacoInstance:null}},watch:{value:function(e){e!==this.monacoInstance.getValue()&&this.monacoInstance.setValue(e)},options:{deep:!0,handler:function(e){this.editorOptions=(0,r.default)({},s,e,{value:this.value}),this.updateOptions()}}},mounted:function(){this.initIntance()},beforeDestroy:function(){this.monacoInstance&&this.monacoInstance.dispose()},methods:{initIntance:function(){var e=this;this.monacoInstance=o.editor.create(this.$el,this.editorOptions);var t=this.monacoInstance.getModel();if(t.setEOL(0),this.value.indexOf("\r\n")>-1){var n=document.createElement("textarea");n.value=this.value,this.$emit("input",n.value)}t.onDidChangeContent((function(t){var n=e.monacoInstance.getValue();e.$emit("input",n)})),this.monacoInstance.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.KEY_S,(function(){var t=e.monacoInstance.getValue();e.$emit("saveContent",t)}))},updateOptions:function(){this.monacoInstance.updateOptions(this.editorOptions)}}}},Pe0B:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-get-param"},[n("bk-table",{attrs:{data:e.paramTableData,size:"small"}},[n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['名称']"),prop:"name"}}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['必选']")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.is_necessary?e.$t('m.treeinfo["是"]'):e.$t('m.treeinfo["否"]'))+"\n            ")]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['备注']"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.desc}},[e._v(e._s(t.row.desc||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isStatic?[e._v("\n                    "+e._s(t.row.customValue||"--")+"\n                ")]:e.isCustom?[n("bk-input",{attrs:{clearable:!0,placeholder:e.$t("m.treeinfo['请输入参数值']")},model:{value:t.row.customValue,callback:function(n){e.$set(t.row,"customValue",n)},expression:"props.row.customValue"}})]:[n("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[n("bk-select",{attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:t.row.source_type,callback:function(n){e.$set(t.row,"source_type",n)},expression:"props.row.source_type"}},e._l(e.sourceTypeList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)],1),e._v(" "),"CUSTOM"===t.row.source_type?n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[n("bk-input",{class:{"bk-border-error":t.row.isCheck&&!t.row.value.toString()},attrs:{clearable:!0,placeholder:e.$t("m.treeinfo['请输入参数值']")},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"props.row.value"}})],1):n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[n("bk-select",{class:{"bk-border-error":t.row.isCheck&&!t.row.value.toString()},attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:t.row.value_key,callback:function(n){e.$set(t.row,"value_key",n)},expression:"props.row.value_key"}},[e._l(e.stateList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),e._v(" "),"addField"!==e.entry?[n("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},on:{click:function(n){return e.addNewItem(t.row)}},slot:"extension"},[n("i",{staticClass:"bk-icon icon-plus-circle mr10"}),e._v(e._s(e.$t('m.treeinfo["添加变量"]'))+"\n                                ")])]:e._e()],2)],1)]]}}])})],1)],1)},a=[];i._withStripped=!0},Qa33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EmptyPageTip",props:{title:{type:String,value:""},subTitle:{type:String,value:""},desc:{type:Array,default:function(){return[]}},links:{type:Array,default:function(){return[]}}}}},RPzc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-data-source"},[n("bk-select",{attrs:{"ext-cls":e.typeClass,clearable:!1,disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code)&&"bk_biz_id"!==e.formInfo.key,searchable:""},on:{selected:e.changeSource},model:{value:e.formInfo.source_type,callback:function(t){e.$set(e.formInfo,"source_type",t)},expression:"formInfo.source_type"}},e._l(e.sourceList,(function(e){return n("bk-option",{key:e.typeName,attrs:{id:e.typeName,name:e.name}})})),1),e._v(" "),"DATADICT"===e.formInfo.source_type?[n("bk-select",{attrs:{"ext-cls":"bk-halfline-item",clearable:!1,searchable:""},model:{value:e.dictionaryData.check,callback:function(t){e.$set(e.dictionaryData,"check",t)},expression:"dictionaryData.check"}},e._l(e.dictionaryData.list,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)]:e._e(),e._v(" "),"API"===e.formInfo.source_type?[n("bk-select",{attrs:{"ext-cls":"bk-threeline-item bk-halfline-margin",placeholder:e.$t("m.treeinfo['请选择接入系统']"),clearable:!1,loading:e.isSystemLoading,searchable:""},on:{selected:e.changeApiSystem},model:{value:e.apiInfo.remote_system_id,callback:function(t){e.$set(e.apiInfo,"remote_system_id",t)},expression:"apiInfo.remote_system_id"}},e._l(e.apiSysList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1),e._v(" "),n("bk-select",{attrs:{"ext-cls":"bk-threeline-item",placeholder:e.$t("m.treeinfo['请选择接口']"),clearable:!1,loading:e.isApiLoading,searchable:""},on:{selected:e.changeApiPort},model:{value:e.apiInfo.remote_api_id,callback:function(t){e.$set(e.apiInfo,"remote_api_id",t)},expression:"apiInfo.remote_api_id"}},e._l(e.apiPortList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)]:e._e(),e._v(" "),"RPC"===e.formInfo.source_type?[n("bk-select",{attrs:{"ext-cls":"bk-halfline-item",clearable:!1,searchable:""},on:{selected:e.changeRpc},model:{value:e.prcData.check,callback:function(t){e.$set(e.prcData,"check",t)},expression:"prcData.check"}},e._l(e.prcData.list,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)]:e._e()],2)},a=[];i._withStripped=!0},"RRc/":function(e,t,n){var i=n("oioR");e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},RgGx:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading: isLoading }"}],staticClass:"bk-hidden-conditions",on:{click:function(t){e.checkStatus=!1}}},[n("div",{staticClass:"bk-form-content",staticStyle:{"margin-left":"0"}},[n("p",{staticClass:"bk-form-p"},[e._v(e._s(e.$t("m.treeinfo['条件组间关系']")))]),e._v(" "),n("bk-radio-group",{model:{value:e.conditionType,callback:function(t){e.conditionType=t},expression:"conditionType"}},[n("bk-radio",{attrs:{value:"and","ext-cls":"mr20"}},[e._v(e._s(e.$t("m.treeinfo['且']")))]),e._v(" "),n("bk-radio",{attrs:{value:"or"}},[e._v(e._s(e.$t("m.treeinfo['或']")))])],1)],1),e._v(" "),e.checkStatus?n("p",{staticClass:"bk-error-msg"},[e._v(e._s(e.$t("m.treeinfo['关系名称，关系表达式，关系值不能为空']")))]):e._e(),e._v(" "),n("i",{staticClass:"bk-icon icon-close",on:{click:e.clearCondition}}),e._v(" "),e._l(e.listInfo,(function(t,i){return n("div",{key:i,staticClass:"bk-between-form",class:{mt20:i}},[n("bk-select",{staticStyle:{width:"182px",float:"left","margin-right":"10px"},attrs:{searchable:""},on:{selected:function(n){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];return e.changeName.apply(void 0,a.concat([t]))}},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"node.key"}},e._l(e.fieldList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1),e._v(" "),n("bk-select",{staticStyle:{width:"120px",float:"left","margin-right":"10px"},attrs:{searchable:""},model:{value:t.condition,callback:function(n){e.$set(t,"condition",n)},expression:"node.condition"}},e._l(t.betweenList,(function(e){return n("bk-option",{key:e.typeName,attrs:{id:e.typeName,name:e.name}})})),1),e._v(" "),"SELECT"===t.type||"MULTISELECT"===t.type||"RADIO"===t.type||"CHECKBOX"===t.type||"MEMBERS"===t.type||"TREESELECT"===t.type?[t.choiceList.length?[n("bk-select",{attrs:{"ext-cls":"bk-form-style",searchable:"",multiple:t.multiSelect},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"node.value"}},e._l(t.choiceList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)]:[n("bk-input",{attrs:{"ext-cls":"bk-form-style",type:"INT"===t.type?"number":"text",placeholder:e.$t("m.treeinfo['请输入关系值']")},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"node.value"}})]]:"DATE"===t.type||"DATETIME"===t.type?[n("bk-date-picker",{attrs:{"ext-cls":"bk-form-style",type:"DATETIME"===t.type?"datetime":"date"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"node.value"}})]:[n("bk-input",{attrs:{"ext-cls":"bk-form-style",type:"INT"===t.type?"number":"text",placeholder:e.$t("m.treeinfo['请输入关系值']")},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"node.value"}})],e._v(" "),n("div",{staticClass:"bk-between-operat"},[n("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(n){return e.addNode(t,i)}}}),e._v(" "),n("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===e.listInfo.length},on:{click:function(n){return e.deleteNode(t,i)}}})])],2)}))],2)},a=[];i._withStripped=!0},RkdA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n("2eEL")),a=o(n("ETop")),r=o(n("u8Ap"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"searchInfo",components:{collapseTransition:i.default,commonCascade:a.default,memberSelect:r.default},props:{moreSearch:{type:Array,default:function(){return[]}}},data:function(){return{searchWord:"",showMore:!1}},methods:{searchMore:function(){this.showMore=!this.showMore},closeSearch:function(){this.showMore=!1},searchContent:function(){this.$parent.getList(1,!0)},clearSearch:function(){this.$parent.clearSearch(),this.$parent.getList(1,!0)}}}},S3QX:function(e,t,n){"use strict";n("tDPT")},SPaw:function(e,t,n){e.exports=n.p+"assets/img/use-field.2a3f2d5.svg"},SioU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=m(n("14Xm")),a=m(n("gDS+")),r=m(n("m1cH")),o=m(n("D3Ub")),s=m(n("2Vgw")),c=m(n("NGZu")),l=m(n("c6Q5")),f=m(n("hA3y")),u=m(n("FGMr")),d=m(n("VflG")),p=n("CeR/");function m(e){return e&&e.__esModule?e:{default:e}}t.default={name:"dataContent",components:{getParam:c.default,postParam:l.default,responseData:f.default,getRpcParam:u.default},mixins:[d.default],props:{formInfo:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){return{}}},workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},apiInfo:{type:Object,default:function(){return{remote_system_id:"",remote_api_id:"",req_params:{},req_body:{},rsp_data:""}}},fieldInfo:{type:Object,default:function(){return{}}},kvRelation:{type:Object,default:function(){return{}}},prcTable:{type:Array,default:function(){return[]}}},data:function(){return{stateList:[],trueStatus:!0,falseStatus:!1}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){this.getRelatedFields()},methods:{addDataLine:function(e,t){if(!this.changeInfo.meta||"APPROVE_RESULT"!==this.changeInfo.meta.code){this.fieldInfo.list.splice(t+1,0,{name:"",key:"",required:!1,nameCheck:!1,keyCheck:!1})}},deleteDataLine:function(e,t){1===this.fieldInfo.list.length||this.changeInfo.meta&&"APPROVE_RESULT"===this.changeInfo.meta.code||this.fieldInfo.list.splice(t,1)},closeError:function(){this.fieldInfo.list.forEach((function(e){e.nameCheck=!1,e.keyCheck=!1}))},getRelatedFields:function(){var e=this;if(this.state){var t={workflow:this.workflow,state:this.state,field:""};this.$store.dispatch("apiRemote/get_related_fields",t).then((function(t){e.stateList=t.data})).catch((function(t){(0,p.errorHandler)(t,e)})).finally((function(){}))}},countArrayAncestors:function(e){var t=[];return function e(n){"array"===n.parentInfo.type&&(t.push(n),e(n.parentInfo)),"object"===n.parentInfo.type&&e(n.parentInfo)}(e),t},listTojson:function(e){var t={};return e.length&&e.forEach((function(e){t[e.name]="CUSTOM"===e.source_type?e.value:"${params_"+e.value_key+"}"})),t},apiFz:function(){var e=this;return(0,o.default)(i.default.mark((function t(){var n,o,s,c,l,f,u,d,p,m,h,b,_;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.getParam){t.next=4;break}t.t0={},t.next=7;break;case 4:return t.next=6,e.listTojson(e.$refs.getParam.paramTableData);case 6:t.t0=t.sent;case 7:if(e.apiInfo.req_params=t.t0,e.$refs.postParam){t.next=12;break}t.t1={},t.next=15;break;case 12:return t.next=14,e.treeToJson(e.$refs.postParam.bodyTableData.filter((function(e){return!e.level})));case 14:t.t1=t.sent;case 15:if(e.apiInfo.req_body=t.t1,n=!1,!e.$refs.getParam){t.next=25;break}if((o=e.$refs.getParam.paramTableData.filter((function(e){return e.is_necessary}))).forEach((function(e,t){e.isCheck=!0,e.isSatisfied="CUSTOM"===e.source_type?!!e.value:!!e.value_key})),!(s=o.filter((function(e){return!e.isSatisfied}))[0])){t.next=25;break}return e.$bkMessage({message:e.$t('m.treeinfo["请输入GET参数！"]'),theme:"error"}),n||(s.el.scrollIntoView(!0),n=!0),t.abrupt("return",!1);case 25:if(!e.$refs.postParam){t.next=34;break}if((c=e.$refs.postParam.bodyTableData.filter((function(e){return e.is_necessary&&"object"!==e.type&&"array"!==e.type}))).forEach((function(e,t){e.isCheck=!0,e.isSatisfied="CUSTOM"===e.source_type?e.value.toString():!!e.value_key})),!(l=c.filter((function(e){return!e.isSatisfied}))[0])){t.next=34;break}return e.$refs.postParam.bodyTableData.forEach((function(e){e.showChildren=!0,e.isShow=!0})),e.$bkMessage({message:e.$t('m.treeinfo["请输入POST参数！"]'),theme:"error"}),n||(l.el.scrollIntoView(!0),n=!0),t.abrupt("return",!1);case 34:if(e.$refs.responseData){t.next=37;break}return e.$bkMessage({message:e.$t('m.treeinfo["数据为空，请联系管理员"]'),theme:"error"}),t.abrupt("return",!1);case 37:if(f=e.$refs.responseData.responseTableData.filter((function(e){return e.isSelectedKey}))[0],u=e.$refs.responseData.responseTableData.filter((function(e){return e.isSelectedValue}))[0],f&&u){t.next=45;break}return e.$bkMessage({message:e.$t('m.treeinfo["请选择返回数据"]'),theme:"error"}),e.$refs.responseData.isCheck=!0,t.abrupt("return",!1);case 45:return d=[].concat((0,r.default)(JSON.parse((0,a.default)(f.ancestorsList))),[f.primaryKey]),p=[].concat((0,r.default)(JSON.parse((0,a.default)(u.ancestorsList))),[u.primaryKey]),t.next=49,e.countArrayAncestors(f);case 49:return m=t.sent,t.next=52,e.countArrayAncestors(u);case 52:if(h=t.sent,b=d.indexOf(m[0].primaryKey),_=p.indexOf(h[0].primaryKey),1===m.length&&1===h.length){t.next=59;break}return t.abrupt("return",!1);case 59:return e.apiInfo.rsp_data=d.slice(0,b).map((function(e){return e=e.replace(/^\d+\_/,"")})).join("."),e.kvRelation.key=d.slice(b+1).map((function(e){return e=e.replace(/^\d+\_/,"")})).join("."),e.kvRelation.name=p.slice(_+1).map((function(e){return e=e.replace(/^\d+\_/,"")})).join("."),t.abrupt("return",!0);case 63:case"end":return t.stop()}}),t,e)})))()},putChar:function(e,t){var n=this;e.key||(this.fieldInfo.list[t].key="",(0,s.default)(this.fieldInfo.list[t].name,{style:s.default.STYLE_NORMAL,heteronym:!1}).forEach((function(e){n.fieldInfo.list[t].key=n.fieldInfo.list[t].key+""+e})),this.fieldInfo.list[t].key=this.fieldInfo.list[t].key.toUpperCase(),this.fieldInfo.list[t].key=this.fieldInfo.list[t].key.replace(/\ /g,"_"),this.fieldInfo.list[t].key.length>=32&&(this.fieldInfo.list[t].key=this.fieldInfo.list[t].key.substr(0,32)))}}}},THJS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-default-value"},["STRING"===e.formInfo.type?[n("bk-input",{attrs:{"ext-cls":"bk-half",clearable:!0,placeholder:e.$t("m.treeinfo['请输入']")},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})]:e._e(),e._v(" "),"TEXT"===e.formInfo.type?[n("div",{staticStyle:{height:"30px"}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.formInfo.default_value,expression:"formInfo.default_value",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble",staticStyle:{width:"49%"},attrs:{rows:"8",placeholder:e.$t("m.treeinfo['请输入']")},domProps:{value:e.formInfo.default_value},on:{input:function(t){t.target.composing||e.$set(e.formInfo,"default_value",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]:e._e(),e._v(" "),"RICHTEXT"===e.formInfo.type?[n("div",[n("rich-text-editor",{attrs:{id:"default-rich-text-editor","full-title":e.label},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"MULTISELECT"===e.formInfo.type||"CHECKBOX"===e.formInfo.type||"SELECT"===e.formInfo.type||"RADIO"===e.formInfo.type||"INPUTSELECT"===e.formInfo.type?["API"===e.formInfo.source_type||"RPC"===e.formInfo.source_type?[n("bk-input",{attrs:{"ext-cls":"bk-half",clearable:!0,placeholder:e.$t("m.treeinfo['请输入']")},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})]:[n("bk-select",{attrs:{"ext-cls":"bk-half",multiple:"MULTISELECT"===e.formInfo.type||"CHECKBOX"===e.formInfo.type,searchable:""},on:{toggle:e.getSelectList},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}},e._l(e.selectList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)]]:e._e(),e._v(" "),"INT"===e.formInfo.type?[n("div",{staticClass:"bk-half"},[n("bk-input",{attrs:{clearable:!0,type:"number",precision:e.precision},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"DATE"===e.formInfo.type?[n("div",{staticClass:"bk-half"},[n("bk-date-picker",{attrs:{placeholder:e.$t("m.newCommon['选择日期']")},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"DATETIME"===e.formInfo.type?[n("div",{staticClass:"bk-half"},[n("bk-date-picker",{attrs:{type:"datetime",placeholder:e.$t("m.newCommon['选择日期时间']")},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"MEMBER"===e.formInfo.type?[n("div",{staticStyle:{width:"49%"}},[n("member-select",{attrs:{multiple:!1},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"MEMBERS"===e.formInfo.type?[n("div",{staticStyle:{width:"49%"}},[n("member-select",{model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1)]:e._e(),e._v(" "),"CUSTOM-FORM"===e.formInfo.type?[n("div",{staticClass:"editor-wrap"},[n("div",{staticClass:"editor-btn-group"},[n("router-link",{staticClass:"opt-item",attrs:{target:"_blank",to:{name:"CustomFormTest"}}},[e._v(e._s(e.$t("m.common['查看模板']")))]),e._v(" "),n("span",{staticClass:"opt-item",on:{click:e.downCustomFormTempalte}},[e._v("\n                    "+e._s(e.$t("m.common['下载模板']")))])],1),e._v(" "),n("code-editor",{attrs:{options:{language:"json"}},model:{value:e.formInfo.default_value,callback:function(t){e.$set(e.formInfo,"default_value",t)},expression:"formInfo.default_value"}})],1),e._v(" "),e.checkStatus.customFormStatus?n("p",{staticClass:"bk-field-error"},[e._v("\n            "+e._s(e.$t("m.treeinfo['格式错误！（JSON 语法错误或者根元素缺少 schemes 和 form_data 属性）']"))+"\n        ")]):e._e()]:e._e()],2)},a=[];i._withStripped=!0},"V+O7":function(e,t,n){n("aPfg")("Set")},V7Et:function(e,t,n){var i=n("2GTP"),a=n("M1xp"),r=n("JB68"),o=n("tEej"),s=n("v6xn");e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,f=4==e,u=6==e,d=5==e||u,p=t||s;return function(t,s,m){for(var h,b,_=r(t),y=a(_),v=i(s,m,3),k=o(y.length),g=0,I=n?p(t,k):c?p(t,0):void 0;k>g;g++)if((d||g in y)&&(b=v(h=y[g],g,_),e))if(n)I[g]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return g;case 2:I.push(h)}else if(f)return!1;return u?-1:l||f?f:I}}},VoSd:function(e,t,n){e.exports=n.p+"assets/img/field.6af3098.svg"},VtRw:function(e,t,n){"use strict";n.r(t);var i=n("MI7q"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},WP3n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("CeR/"),r=n("BWJp"),o=(i=r)&&i.__esModule?i:{default:i};t.default={name:"hiddenConditions",mixins:[o.default],props:{workflow:{type:[String,Number],default:function(){return""}},state:{type:[String,Number],default:function(){return""}},formInfo:{type:Object,default:function(){return{}}},templateStage:{type:String,default:""},templateInfo:{type:Object,default:function(){return{}}},addOrigin:{type:Object,default:function(){return{isOther:!1,addOriginInfo:{}}}}},data:function(){return{isLoading:!1,listInfo:[],conditionType:"and",fieldList:[],checkStatus:!1}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){this.getFrontNodesList()},methods:{getFrontNodesList:function(){var e=this;if(this.state||this.templateInfo.id){var t="",n={};this.state&&(t="apiRemote/get_related_fields",n.workflow=this.workflow,n.state=this.state),this.templateInfo.id&&(t="taskTemplate/getFrontFieldsList",n.id=this.templateInfo.id,n.stage=this.templateStage),this.isLoading=!0,this.$store.dispatch(t,n).then((function(t){e.frontNodesList=t.data,e.initData()})).catch((function(t){(0,a.errorHandler)(t,e)})).finally((function(){e.isLoading=!1}))}},initData:function(){var e=this;this.listInfo=[],this.formInfo.show_conditions.expressions&&this.formInfo.show_conditions.expressions.length?(this.formInfo.show_conditions.expressions.forEach((function(t){e.frontNodesList.forEach((function(n){if(n.key===t.key){var i="MULTISELECT"===n.type||"CHECKBOX"===n.type||"MEMBERS"===n.type||"TREESELECT"===n.type,a=e.checkBetweenList(n.type);e.listInfo.push({condition:t.condition,key:t.key,value:i?t.value.split(","):t.value,choiceList:n.choice,type:t.type,multiSelect:i,betweenList:a})}}))})),this.conditionType=this.formInfo.show_conditions.type):(this.listInfo=[{condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")}],this.conditionType="and"),this.fieldList=[],this.frontNodesList.forEach((function(t){t.key===e.formInfo.key||["CUSTOMTABLE","FILE","RICHTEXT","TABLE","DATETIMERANGE","MEMBERS"].some((function(e){return e===t.type}))||e.fieldList.push(t)})),this.fieldList.forEach((function(t){"RPC"===t.source_type&&e.getRpcData(t)})),this.isNecessaryToWatch({fields:this.fieldList},"workflow")},getRpcData:function(e){var t=this;this.$store.dispatch("apiRemote/getRpcData",e).then((function(t){e.choice=t.data})).catch((function(e){(0,a.errorHandler)(e,t)}))},checkBetweenList:function(e){return["MULTISELECT","CHECKBOX","MEMBERS","TREESELECT"].some((function(t){return t===e}))?this.globalChoise.methods.filter((function(e){return"issuperset"===e.typeName||"notissuperset"===e.typeName})):["DATE","DATETIME","DATETIMERANGE","INT"].some((function(t){return t===e}))?this.globalChoise.methods.filter((function(e){return"issuperset"!==e.typeName&&"notissuperset"!==e.typeName})):this.globalChoise.methods.filter((function(e){return"=="===e.typeName||"!="===e.typeName}))},clearCondition:function(){this.listInfo=[{condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")}]},changeName:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this.fieldList.filter((function(e){return e.key===t[0]}))[0],a="MULTISELECT"===i.type||"CHECKBOX"===i.type||"MEMBERS"===i.type||"TREESELECT"===i.type,r=this.checkBetweenList(i.type);t[2].type=i.type,t[2].value=a?[]:"",t[2].betweenList=r,t[2].condition="","SELECT"===i.type||"MULTISELECT"===i.type||"RADIO"===i.type||"CHECKBOX"===i.type||"MEMBERS"===i.type||"TREESELECT"===i.type?(t[2].choiceList=[],i.choice.forEach((function(e){t[2].choiceList.push({key:e.key,name:e.name})})),t[2].multiSelect=a):t[2].choiceList=""},addNode:function(e,t){var n={condition:"",key:"",value:"",choiceList:"",type:"STRING",multiSelect:!1,betweenList:this.checkBetweenList("STRING")};this.listInfo.splice(t+1,0,n)},deleteNode:function(e,t){1!==this.listInfo.length&&this.listInfo.splice(t,1)},checkList:function(){return this.checkStatus=this.listInfo.some((function(e){return!(e.key&&e.condition&&(Array.isArray(e.value)?e.value.length:e.value))})),this.checkStatus}}}},Wu5q:function(e,t,n){"use strict";var i=n("2faE").f,a=n("oVml"),r=n("XJU/"),o=n("2GTP"),s=n("EXMj"),c=n("oioR"),l=n("MPFp"),f=n("UO39"),u=n("TJWN"),d=n("jmDH"),p=n("6/1s").fastKey,m=n("n3ko"),h=d?"_s":"size",b=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var f=e((function(e,i){s(e,f,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,null!=i&&c(i,n,e[l],e)}));return r(f.prototype,{clear:function(){for(var e=m(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var n=m(this,t),i=b(n,e);if(i){var a=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=a),a&&(a.p=r),n._f==i&&(n._f=a),n._l==i&&(n._l=r),n[h]--}return!!i},forEach:function(e){m(this,t);for(var n,i=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!b(m(this,t),e)}}),d&&i(f.prototype,"size",{get:function(){return m(this,t)[h]}}),f},def:function(e,t,n){var i,a,r=b(e,t);return r?r.v=n:(e._l=r={i:a=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=r),i&&(i.n=r),e[h]++,"F"!==a&&(e._i[a]=r)),e},getEntry:b,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=m(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),n?"entries":"values",!n,!0),u(t)}}},X5Hi:function(e,t,n){"use strict";n("cjoU")},XDfz:function(e,t,n){"use strict";n.r(t);var i=n("RgGx"),a=n("c6BP");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("yhLn");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"4bfee756",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/hiddenConditions.vue",t.default=s.exports},XnKi:function(e,t,n){"use strict";n.r(t);var i=n("/71P"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},"Y6/M":function(e,t,n){"use strict";n.r(t);var i=n("RPzc"),a=n("CjxG");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("NBCF");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"30763339",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/dataSource.vue",t.default=s.exports},aPfg:function(e,t,n){"use strict";var i=n("Y7ZC"),a=n("eaoh"),r=n("2GTP"),o=n("oioR");e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,s,c=arguments[1];return a(this),(t=void 0!==c)&&a(c),null==e?new this:(n=[],t?(i=0,s=r(c,arguments[2],2),o(e,!1,(function(e){n.push(s(e,i++))}))):o(e,!1,n.push,n),new this(n))}})}},bTF2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("nlfF"),r=(i=a)&&i.__esModule?i:{default:i};t.default={name:"Fields",components:{PublicFields:r.default}}},c6BP:function(e,t,n){"use strict";n.r(t);var i=n("WP3n"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},c6Q5:function(e,t,n){"use strict";n.r(t);var i=n("d4I9"),a=n("qCK4");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("Ho96");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"0d4b5cae",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/postParam.vue",t.default=s.exports},cHUd:function(e,t,n){"use strict";var i=n("Y7ZC");e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},cPmg:function(e,t,n){},cjoU:function(e,t,n){},d4I9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-get-param"},[n("bk-table",{attrs:{data:e.tableList,size:"small"}},[n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['名称']"),"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"bk-more"},[n("span",{style:{paddingLeft:20*t.row.level+"px"}},[t.row.has_children?n("span",{class:["bk-icon","tree-expanded-icon",t.row.showChildren?"icon-down-shape":"icon-right-shape"],on:{click:function(n){return e.changeState(t.row)}}}):n("span",{staticClass:"bk-icon bk-more-icon"}),e._v(" "),n("span",[e._v(e._s(t.row.key||"--"))])])])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['类型']"),prop:"type"}}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['是否必须']")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.is_necessary?e.$t('m.treeinfo["是"]'):e.$t('m.treeinfo["否"]'))+"\n            ")]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['备注']"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.desc}},[e._v(e._s(t.row.desc||"--"))])]}}])}),e._v(" "),n("bk-table-column",{attrs:{label:e.$t("m.treeinfo['参数值']"),width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isStatic&&"object"!==t.row.type&&"array"!==t.row.type?[e._v("\n                    "+e._s(t.row.customValue||"--")+"\n                ")]:e.isCustom&&"object"!==t.row.type&&"array"!==t.row.type?[n("bk-input",{attrs:{type:"string"===t.row.type?"text":"number",placeholder:e.$t("m.treeinfo['请输入参数值']")},model:{value:t.row.customValue,callback:function(n){e.$set(t.row,"customValue",n)},expression:"props.row.customValue"}})]:["object"!==t.row.type&&"array"!==t.row.type?[n("div",{staticStyle:{width:"120px",position:"absolute",top:"5px",left:"15px"}},[n("bk-select",{attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:t.row.source_type,callback:function(n){e.$set(t.row,"source_type",n)},expression:"props.row.source_type"}},e._l(e.sourceTypeList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),1)],1),e._v(" "),t.row.source_type&&"CUSTOM"!==t.row.source_type?n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},[n("bk-select",{class:{"bk-border-error":t.row.isCheck&&!t.row.value_key.toString()},attrs:{clearable:!1,searchable:"","font-size":"medium"},model:{value:t.row.value_key,callback:function(n){e.$set(t.row,"value_key",n)},expression:"props.row.value_key"}},[e._l(e.stateList,(function(e){return n("bk-option",{key:e.key,attrs:{id:e.key,name:e.name}})})),e._v(" "),"addField"!==e.entry?[n("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},on:{click:function(n){return e.addNewItem(t.row)}},slot:"extension"},[n("i",{staticClass:"bk-icon icon-plus-circle"}),e._v(e._s(e.$t('m.treeinfo["添加变量"]'))+"\n                                    ")])]:e._e()],2)],1):n("div",{staticStyle:{width:"140px",position:"absolute",top:"4px",right:"15px"}},["string"===t.row.type||"number"===t.row.type?[n("bk-input",{class:{"bk-border-error":t.row.isCheck&&!t.row.value.toString()},attrs:{type:"string"===t.row.type?"text":"number",placeholder:e.$t("m.treeinfo['请输入参数值']")},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"props.row.value"}})]:e._e(),e._v(" "),"boolean"===t.row.type?[n("bk-radio-group",{model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"props.row.value"}},[n("bk-radio",{attrs:{value:e.trueSatatus}},[e._v("true")]),e._v(" "),n("bk-radio",{attrs:{value:e.falseSatatus}},[e._v("false")])],1)]:e._e()],2)]:e._e(),e._v(" "),e.isStatic||"array"!==t.row.lastType?e._e():n("div",{staticClass:"bk-between-operat"},[n("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(n){return e.addChildren(t.row)}}}),e._v(" "),"array"===t.row.lastType?n("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":e.countSon(t.row)},on:{click:function(n){return e.deletChildren(t.row)}}}):e._e()])]]}}])})],1)],1)},a=[];i._withStripped=!0},dGg1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CUSTOM_FORM_TEMPLATE={config:{mode:"sideslider"},schemes:{base_text_scheme:{type:"text",attrs:{styles:{label:["border"],value:["highlight","border"]},desc:"通用描述文字"}},table_text_scheme:{type:"text",attrs:{styles:{label:["border"],value:["highlight","border"]}}},base_table_scheme:{type:"table",attrs:{column:[{name:"操作",type:"text",key:"column1"},{name:"关联相关内容",key:"column2",scheme:"table_text_scheme",attrs:{}},{name:"申请期限",type:"text",key:"column3",attrs:{sort:!0}}]}},sub_table_scheme:{type:"table",attrs:{column:[{name:"关联内容-类型",key:"column1",scheme:"base_text_scheme"},{name:"类型值",key:"column2",scheme:"table_text_scheme"}]}},sub2_table_scheme:{type:"table",attrs:{column:[{name:"主机",key:"column1",scheme:"base_text_scheme"}]}}},form_data:[{label:"业务：",scheme:"base_text_scheme",value:"蓝鲸",desc:"覆盖 scheme 中通用描述文字",children:[{label:"子业务1：",scheme:"base_text_scheme",value:"test1"},{label:"子业务2：",scheme:"base_text_scheme",value:"test2"}]},{label:"提单人：",scheme:"base_text_scheme",value:""},{label:"提单时间：",scheme:"base_text_scheme",value:""}]}},dL40:function(e,t,n){var i=n("Y7ZC");i(i.P+i.R,"Set",{toJSON:n("8iia")("Set")})},fJfp:function(e,t,n){},fmQd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isDataLoading},expression:"{ isLoading: isDataLoading }"}],staticClass:"bk-add-field"},[n("bk-form",{ref:"fieldForm",attrs:{"label-width":200,"form-type":e.formAlign,model:e.formInfo,rules:e.rules}},[Object.keys(e.sospInfo).length?[n("bk-form-item",{style:{marginTop:"vertical"===e.formAlign?0:"20px"},attrs:{label:e.$t("m.treeinfo['前置节点']"),required:!0,property:"prevId","ext-cls":"bk-mt0-item"}},[n("bk-select",{attrs:{searchable:""},model:{value:e.formInfo.prevId,callback:function(t){e.$set(e.formInfo,"prevId",t)},expression:"formInfo.prevId"}},e._l(e.prevNodeList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1)]:e._e(),e._v(" "),n("bk-form-item",{style:{marginTop:"vertical"===e.formAlign?0:"20px"},attrs:{label:e.$t("m.treeinfo['字段名']"),required:!0,property:"name","ext-cls":"bk-halfline-item bk-halfline-margin"}},[n("bk-input",{attrs:{maxlength:"120",disabled:"TABLE"===e.changeInfo.source&&"bk_biz_id"!==e.formInfo.key,placeholder:e.$t("m.treeinfo['请输入字段显示名']")},on:{change:e.fieldNameChange,input:e.putKey},model:{value:e.formInfo.name,callback:function(t){e.$set(e.formInfo,"name",t)},expression:"formInfo.name"}})],1),e._v(" "),n("bk-form-item",{style:{marginTop:"vertical"===e.formAlign?0:"20px"},attrs:{label:e.$t("m.treeinfo['唯一标识']"),required:!0,property:"key","ext-cls":"bk-halfline-item"}},[n("bk-input",{attrs:{placeholder:e.$t("m.treeinfo['请输入唯一标识']"),disabled:"number"==typeof e.changeInfo.id||e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source},model:{value:e.formInfo.key,callback:function(t){e.$set(e.formInfo,"key",t)},expression:"formInfo.key"}})],1),e._v(" "),n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['字段类型']"),required:!0,property:"type","ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item"}},[n("bk-select",{attrs:{clearable:!1,disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code)&&"bk_biz_id"!==e.formInfo.key,searchable:""},on:{selected:e.changeType},model:{value:e.formInfo.type,callback:function(t){e.$set(e.formInfo,"type",t)},expression:"formInfo.type"}},e._l(e.fieldTypeList,(function(e){return n("bk-option",{key:e.typeName,attrs:{id:e.typeName,name:e.name}})})),1)],1),e._v(" "),n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['校验方式']"),required:!0,"ext-cls":"bk-halfline-item bk-mt20-item"}},[n("bk-select",{attrs:{clearable:!1,disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code)&&"bk_biz_id"!==e.formInfo.key,searchable:""},on:{selected:e.changeRegex},model:{value:e.formInfo.regex,callback:function(t){e.$set(e.formInfo,"regex",t)},expression:"formInfo.regex"}},e._l(e.regexList,(function(e){return n("bk-option",{key:e.typeName,attrs:{id:e.typeName,name:e.name}})})),1)],1),e._v(" "),"ASSOCIATED_FIELD_VALIDATION"!==e.formInfo.regex||e.isEditPublic?e._e():n("div",{staticClass:"bk-form-item bk-relate-conditions",staticStyle:{width:"100%"}},[n("div",{staticClass:"bk-form-content",staticStyle:{"margin-left":"0"}},[n("p",{staticClass:"bk-form-p"},[e._v(e._s(e.$t('m.newCommon["字段间关系"]')))]),e._v(" "),n("bk-radio-group",{model:{value:e.formInfo.regex_config.rule.type,callback:function(t){e.$set(e.formInfo.regex_config.rule,"type",t)},expression:"formInfo.regex_config.rule.type"}},[n("bk-radio",{attrs:{value:"and","ext-cls":"mr20"}},[e._v(e._s(e.$t("m.treeinfo['且']")))]),e._v(" "),n("bk-radio",{attrs:{value:"or"}},[e._v(e._s(e.$t("m.treeinfo['或']")))])],1)],1),e._v(" "),e._l(e.formInfo.regex_config.rule.expressions,(function(t,i){return n("div",{key:i,staticClass:"bk-between-form"},[n("p",{staticClass:"current-field"},[e._v(e._s(e.$t('m.newCommon["当前字段"]')))]),e._v(" "),n("bk-select",{staticStyle:{width:"120px"},attrs:{"ext-cls":"field-valid-select",clearable:!1},model:{value:t.condition,callback:function(n){e.$set(t,"condition",n)},expression:"expression.condition"}},e._l(e.betweenList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.typeName,name:e.name}})})),1),e._v(" "),n("bk-select",{staticStyle:{width:"210px"},attrs:{"ext-cls":"field-valid-select",clearable:!1},on:{change:function(n){return e.onRegexFieldChange(n,t)}},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"expression.key"}},e._l(e.regexFieldList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.key,name:e.name}})})),1),e._v(" "),n("div",{staticClass:"bk-between-operate"},[n("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(t){return e.addExpression()}}}),e._v(" "),n("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===e.formInfo.regex_config.rule.expressions.length},on:{click:function(t){return e.deleteExpression(i)}}})])],1)}))],2),e._v(" "),"CUSTOM"===e.formInfo.regex?[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['正则规则']"),required:!0,property:"key","ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item"}},[n("bk-input",{attrs:{disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source)&&"bk_biz_id"!==e.formInfo.key,placeholder:e.$t("m.treeinfo['请输入正则规则']")},model:{value:e.formInfo.customRegex,callback:function(t){e.$set(e.formInfo,"customRegex",t)},expression:"formInfo.customRegex"}})],1)]:e._e()],2),e._v(" "),n("bk-form",{ref:"dataForm",attrs:{"label-width":200,"form-type":e.formAlign,model:e.formInfo}},[e.showType.sourceList.some((function(t){return t===e.formInfo.type}))?[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['数据源']"),required:!0,"ext-cls":"bk-mt20-item"}},[n("data-source",{ref:"dataSource",attrs:{"form-info":e.formInfo,"prc-data":e.prcData,"change-info":e.assignValue,"api-info":e.apiInfo.api_info,"dictionary-data":e.dictionaryData},on:{changeApiInfo:e.changeApiInfo,getRpcData:e.getRpcData}})],1),e._v(" "),"DATADICT"!==e.formInfo.source_type&&"RPC"!==e.formInfo.source_type||"RPC"===e.formInfo.source_type&&e.prcTable.length?[e._l(e.globalChoise.source_type,(function(t,i){return[t.typeName===e.formInfo.source_type?n("bk-form-item",{key:i,attrs:{label:t.name,desc:t.desc,required:!0,"ext-cls":"bk-mt20-item"}},[n("data-content",{ref:"dataContent",refInFor:!0,attrs:{"form-info":e.formInfo,workflow:e.workflow,state:e.state,"change-info":e.assignValue,"api-detail":e.apiDetail,"api-info":e.apiInfo.api_info,"kv-relation":e.apiInfo.kv_relation,"prc-table":e.prcTable,"field-info":e.fieldInfo}})],1):e._e()]}))]:e._e()]:e._e(),e._v(" "),"CUSTOMTABLE"===e.formInfo.type?[n("bk-form-item",{attrs:{"data-test-id":"field_form_custom",label:e.$t("m.treeinfo['自定义数据']"),required:!0,"ext-cls":"bk-mt20-item"}},[n("div",{on:{click:function(t){e.checkStatus.customTableStatus=!1}}},[n("custom-table-data",{attrs:{"custom-table-info":e.customTableInfo}}),e._v(" "),e.checkStatus.customTableStatus?n("p",{staticClass:"bk-field-error"},[e._v(e._s(e.$t('m.treeinfo["请填写正确格式的自定义数据"]')))]):e._e()],1),e._v(" "),(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code)&&"bk_biz_id"!==e.formInfo.key?n("div",{staticClass:"bk-form-disabled"}):e._e()])]:e._e(),e._v(" "),"FILE"===e.formInfo.type?[n("bk-form-item",{attrs:{"ext-cls":"bk-input-position bk-mt20-item",label:e.$t("m.treeinfo['上传附件模板']")}},[n("bk-button",{attrs:{theme:"default",title:e.$t("m.treeinfo['点击上传']")}},[e._v("\n                    "+e._s(e.$t("m.treeinfo['点击上传']"))+"\n                ")]),e._v(" "),n("input",{staticClass:"bk-input-file",attrs:{type:"file"},domProps:{value:e.fileVal},on:{change:e.handleFile}}),e._v(" "),n("ul",{staticClass:"bk-file-list"},e._l(e.fileList,(function(t,i){return n("li",{key:i},[n("span",{staticClass:"bk-file-success"},[n("i",{staticClass:"bk-icon icon-check-1"})]),e._v(" "),n("span",[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"bk-file-delete",on:{click:function(n){return e.deleteFile(t,i)}}},[e._v("×")])])})),0),e._v(" "),!e.changeInfo.is_builtin&&"TABLE"!==e.changeInfo.source||"bk_biz_id"===e.formInfo.key?e._e():n("div",{staticClass:"bk-form-disabled"})],1)]:e._e(),e._v(" "),e.showType.belongDefaultList.some((function(t){return e.formInfo.type===t}))?[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['默认值']"),"ext-cls":"bk-mt20-item"}},[n("default-value",{attrs:{"form-info":e.formInfo,"field-info":e.fieldInfo,"dictionary-data":e.dictionaryData,"change-info":e.changeInfo,"api-info":e.apiInfo,"check-status":e.checkStatus,label:e.$t("m.treeinfo['默认值']")}})],1)]:e._e(),e._v(" "),e.addOrigin.isOther&&"publicField"===e.addOrigin.addOriginInfo.type?e._e():[n("bk-form-item",{attrs:{"ext-cls":"bk-halfline-item bk-halfline-margin bk-mt20-item",label:e.$t("m.treeinfo['布局要求']"),required:!0}},[n("bk-radio-group",{model:{value:e.formInfo.layout,callback:function(t){e.$set(e.formInfo,"layout",t)},expression:"formInfo.layout"}},[e._l(e.globalChoise.layout_type,(function(t,i){return[n("bk-radio",{key:i,attrs:{"ext-cls":"mr20",value:t.typeName,disabled:e.showType.layoutList.some((function(t){return t===e.formInfo.type}))}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])]}))],2)],1),e._v(" "),n("bk-form-item",{attrs:{"ext-cls":"bk-halfline-item bk-mt20-item",label:e.$t("m.treeinfo['字段必填']"),required:!0}},[n("bk-radio-group",{model:{value:e.formInfo.validate,callback:function(t){e.$set(e.formInfo,"validate",t)},expression:"formInfo.validate"}},[e._l(e.globalChoise.validate_type,(function(t,i){return[n("bk-radio",{key:i,attrs:{"ext-cls":"mr20",value:t.typeName,disabled:"title"===e.changeInfo.key||e.changeInfo.is_builtin||"bk_biz_id"===e.formInfo.key}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])]}))],2)],1)],e._v(" "),n("bk-form-item",{attrs:{"ext-cls":"bk-tanble-height bk-mt20-item",label:e.$t("m.treeinfo['填写说明']")}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.formInfo.desc,expression:"formInfo.desc",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble bk-halfline-item bk-halfline-margin field-input-tips",attrs:{placeholder:e.$t("m.treeinfo['请输入字段填写说明']"),disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source)&&"bk_biz_id"!==e.formInfo.key},domProps:{value:e.formInfo.desc},on:{input:function(t){t.target.composing||e.$set(e.formInfo,"desc",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("p",{staticClass:"field-tips-checkbox",staticStyle:{"margin-left":"335px"}},[n("bk-checkbox",{attrs:{"true-value":e.trueStatus,"false-value":e.falseStatus,disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source)&&"bk_biz_id"!==e.formInfo.key},model:{value:e.formInfo.is_tips,callback:function(t){e.$set(e.formInfo,"is_tips",t)},expression:"formInfo.is_tips"}},[e._v("\n                    "+e._s(e.$t('m.treeinfo["添加额外提示说明"]'))+"\n                ")])],1)]),e._v(" "),e.formInfo.is_tips?[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['字段释疑']"),required:!0,"ext-cls":"bk-mt20-item"}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.formInfo.tips,expression:"formInfo.tips",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble bk-halfline-item bk-halfline-margin",attrs:{disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source)&&"bk_biz_id"!==e.formInfo.key,placeholder:e.$t("m.treeinfo['请输入，用于鼠标经过提示']")},domProps:{value:e.formInfo.tips},on:{input:function(t){t.target.composing||e.$set(e.formInfo,"tips",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("p",{staticClass:"bk-label-tips"},[n("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.top",value:e.formInfo.tips||e.$t("m.treeinfo['字段释疑填填看哦']"),expression:"(formInfo.tips || $t(`m.treeinfo['字段释疑填填看哦']`))",modifiers:{top:!0}}]},[e._v("\n                        "+e._s(e.$t('m.treeinfo["效果预览"]'))+"\n                    ")])]),e._v(" "),"TABLE"===e.changeInfo.source||e.changeInfo.is_builtin?n("div",{staticClass:"bk-form-disabled"}):e._e()])]:e._e(),e._v(" "),e.addOrigin.isOther&&"publicField"===e.addOrigin.addOriginInfo.type||!e.changeInfo.meta||"APPROVE_RESULT"===e.changeInfo.meta.code?e._e():[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['是否设置字段隐藏条件']"),"ext-cls":"bk-mt20-item"}},[n("bk-switcher",{attrs:{size:"small",disabled:"title"===e.changeInfo.key},model:{value:e.formInfo.show_type,callback:function(t){e.$set(e.formInfo,"show_type",t)},expression:"formInfo.show_type"}})],1),e._v(" "),e.formInfo.show_type?[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['隐藏条件']"),desc:e.$t("m.treeinfo['字段默认为显示。当满足以下配置条件时，该字段将会被隐藏。']"),"ext-cls":"bk-mt20-item"}},[n("hidden-conditions",{ref:"hiddenConditions",attrs:{"template-info":e.templateInfo,"template-stage":e.templateStage,"add-origin":e.addOrigin,workflow:e.workflow,state:e.state,"form-info":e.formInfo}})],1)]:e._e()]],2),e._v(" "),n("div",{staticClass:"operate-btns mt20"},[n("bk-button",{staticClass:"mr10",attrs:{theme:"primary","data-test-id":"field_button_submit",title:e.$t("m.treeinfo['提交']"),loading:e.secondClick},on:{click:e.checkInfo}},[e._v("\n            "+e._s(e.$t("m.treeinfo['提交']"))+"\n        ")]),e._v(" "),n("bk-button",{staticClass:"mr10",attrs:{theme:"default","data-test-id":"field_button_cancel",title:e.$t("m.treeinfo['取消']"),disabled:e.secondClick},on:{click:e.onCancelClick}},[e._v("\n            "+e._s(e.$t("m.treeinfo['取消']"))+"\n        ")])],1)],1)},a=[];i._withStripped=!0},gzP0:function(e,t,n){"use strict";n.r(t);var i=n("nXI0"),a=n("ltoX");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("FaS7");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"4bf3fe47",null);s.options.__file="src/views/project/components/emptyTip.vue",t.default=s.exports},hA3y:function(e,t,n){"use strict";n.r(t);var i=n("hiyp"),a=n("jvs4");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("kicn");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"bc8ef742",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/responseData.vue",t.default=s.exports},hZMz:function(e,t,n){"use strict";n.r(t);var i=n("HEg5"),a=n("o9HS");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);s.options.__file="src/views/manage/fields.vue",t.default=s.exports},hZSR:function(e,t,n){"use strict";n("i5S3")},hiyp:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-get-param"},[n("div",{staticClass:"bk-params-title"},[e._v("\n        "+e._s(e.$t('m.treeinfo["返回数据"]'))+"\n    ")]),e._v(" "),n("div",{staticClass:"bk-param-three"},[n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['选取数组']"),required:!0}},[n("div",{staticClass:"bk-form-content bk-dialog-input"},[n("div",{ref:"cascader"},[[n("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:e.closeOther0,expression:"closeOther0"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key?n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-border-red":e.checkInfo.assignors,"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key}},[n("span",{class:{"bk-color-tree":e.organization.assignorTree.name}},[e._v(e._s(e.organization.assignorTree.name||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-border-red":e.checkInfo.assignors,"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key},on:{click:function(t){return t.stopPropagation(),e.showTree(0)}}},[n("span",{class:{"bk-color-tree":e.organization.assignorTree.name}},[e._v(e._s(e.organization.assignorTree.name||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],e._v(" "),n("transition",{attrs:{name:"fade"}},[e.organizaInfo.assignorShow[0]?n("div",{staticClass:"bk-search-tree-content",style:{width:50*e.maxLevelTree[0]+"%"}},[n("export-tree",{attrs:{disabled:(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key,"tree-data-list":e.organization.assignorPerson,"is-key-value":0},on:{toggle:e.assignorToggle,toggleChildren:e.toggleChildren}})],1):e._e()])],2)]],2)])]),e._v(" "),n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['关键字字段']"),required:!0}},[n("div",{staticClass:"bk-form-content bk-dialog-input"},[n("div",{ref:"cascader"},[[n("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:e.closeOther1,expression:"closeOther1"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key?n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key}},[n("span",{class:{"bk-color-tree":e.settingKeyName}},[e._v(e._s(e.settingKeyName||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key},on:{click:function(t){return t.stopPropagation(),e.showTree(1)}}},[n("span",{class:{"bk-color-tree":e.settingKeyName}},[e._v(e._s(e.settingKeyName||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],e._v(" "),n("transition",{attrs:{name:"fade"}},[e.organizaInfo.assignorShow[1]?n("div",{staticClass:"bk-search-tree-content",style:{width:50*e.maxLevelTree[1]+"%"}},[n("export-tree",{attrs:{disabled:(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key,"tree-data-list":e.selectInfo.selectkeylist,"is-key-value":1},on:{toggle:e.assignorToggle,toggleChildren:e.toggleChildren}})],1):e._e()])],2)]],2)])]),e._v(" "),n("bk-form-item",{attrs:{label:e.$t("m.treeinfo['显示字段']"),required:!0}},[n("div",{staticClass:"bk-form-content bk-dialog-input"},[n("div",{ref:"cascader"},[[n("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:e.closeOther2,expression:"closeOther2"}],staticClass:"bk-search-tree",staticStyle:{width:"100%",float:"left"}},[[(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key?n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key}},[n("span",{class:{"bk-color-tree":e.settingValueName}},[e._v(e._s(e.settingValueName||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})]):n("div",{staticClass:"bk-search-tree-wrapper",class:{"bk-back-color":(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key},on:{click:function(t){return t.stopPropagation(),e.showTree(2)}}},[n("span",{class:{"bk-color-tree":e.settingValueName}},[e._v(e._s(e.settingValueName||e.$t('m.treeinfo["请选择"]')))]),e._v(" "),n("i",{staticClass:"bk-select-angle bk-icon icon-framework"})])],e._v(" "),n("transition",{attrs:{name:"fade"}},[e.organizaInfo.assignorShow[2]?n("div",{staticClass:"bk-search-tree-content",style:{width:50*e.maxLevelTree[2]+"%"}},[n("export-tree",{attrs:{disabled:(e.changeInfo.is_builtin||e.formInfo.isModule)&&"bk_biz_id"!==e.formInfo.key,"tree-data-list":e.selectInfo.selectvaluelist,"is-key-value":2},on:{toggle:e.assignorToggle,toggleChildren:e.toggleChildren}})],1):e._e()])],2)]],2)])])],1)])},a=[];i._withStripped=!0},"hk/f":function(e,t,n){"use strict";n.r(t);var i=n("tJou"),a=n("C6tm");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("rujD");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"526c82ea",null);s.options.__file="src/components/CodeEditor.vue",t.default=s.exports},hmS1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n("m1cH")),a=l(n("gDS+")),r=l(n("GQeE")),o=l(n("14Xm")),s=l(n("D3Ub")),c=l(n("VflG"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"postParam",mixins:[c.default],props:{changeInfo:{type:Object,default:function(){return{}}},apiDetail:{type:Object,default:function(){}},stateList:{type:Array,default:function(){return[]}},isStatic:{type:Boolean,default:function(){return!1}},isCustom:{type:Boolean,default:!1},bodyValue:{type:Object,default:function(){}},entry:{type:String,default:function(){return""}},formInfo:{type:Object,default:function(){return{}}}},data:function(){return{trueSatatus:!0,falseSatatus:!1,lala:{value:"111",offsetTop:""},bodyTableData:[],paramTableData:[],checkInfo:{name:"",road:""},sourceTypeList:[{id:1,key:"CUSTOM",name:this.$t('m.treeinfo["自定义"]')},{id:2,key:"FIELDS",name:this.$t('m.treeinfo["引用变量"]')}],paramTableInfo:{value:"",placeholder:this.$t('m.treeinfo["请选择数据来源"]')}}},computed:{tableList:function(){return this.bodyTableData.filter((function(e){return e.isShow}))}},watch:{apiDetail:function(e,t){this.initData()}},mounted:function(){var e=this;return(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.isStatic;case 2:return t.next=4,e.bodyValue;case 4:return t.next=6,e.initData();case 6:case"end":return t.stop()}}),t,e)})))()},methods:{initData:function(){this.bodyTableDataChange()},bodyTableDataChange:function(){var e=this;return(0,s.default)(o.default.mark((function t(){var n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,r.default)(e.apiDetail.req_body).length){t.next=5;break}e.apiDetail.treeDataList=[{has_children:!1,showChildren:!0,checkInfo:!1,key:"root",is_necessary:!0,type:"object",desc:e.$t('m.treeinfo["初始化数据"]'),parentInfo:"",children:[]}],e.apiDetail.bodyTableData=[],t.next=12;break;case 5:return t.next=7,e.jsonschemaToList({root:JSON.parse((0,a.default)(e.apiDetail.req_body))});case 7:return e.apiDetail.treeDataList=t.sent,e.isStatic||e.isCustom?e.apiDetail.treeDataList=e.jsonValueToTree(e.bodyValue,JSON.parse((0,a.default)(e.apiDetail.treeDataList))):e.changeInfo.api_info&&e.changeInfo.api_info.remote_api_id===e.apiDetail.id&&(e.apiDetail.treeDataList=e.jsonValueToTree(e.changeInfo.api_info.req_body,JSON.parse((0,a.default)(e.apiDetail.treeDataList)))),t.next=11,e.treeToTableList(JSON.parse((0,a.default)(e.apiDetail.treeDataList[0].children)));case 11:e.apiDetail.bodyTableData=t.sent;case 12:return t.next=14,JSON.parse((0,a.default)(e.apiDetail.bodyTableData));case 14:return n=t.sent,t.next=17,n.forEach((function(e){e.isCheck=!1,e.isSatisfied=!1,e.el=null,e.customValue=e.value||"",e.name=e.key||"",e.children=[],e.source_type=e.source_type||"CUSTOM",e.value=void 0!==e.value?e.value:"",e.value_key=void 0!==e.value_key&&e.value_key.toString()?e.value_key:""}));case 17:return t.next=19,e.recordChildren(n);case 19:return t.next=21,n;case 21:e.bodyTableData=t.sent;case 22:case"end":return t.stop()}}),t,e)})))()},recordChildren:function(e,t){for(var n=e.map((function(e){return e.level})),a=Math.max.apply(Math,(0,i.default)(n)),r=function(t){e.filter((function(e){return e.level===t})).forEach((function(t){!function(e,t){e.filter((function(e){return e.level===t.level-1&&e.primaryKey===t.parentPrimaryKey&&e.ancestorsList.toString()===t.ancestorsList.slice(0,-1).toString()}))[0].children.push(t)}(e,t)}))},o=a;o>(t||0);o--)r(o)},changeState:function(e){e.showChildren=!e.showChildren,e.children.forEach((function(t){t.isShow=e.showChildren})),e.showChildren||this.closeChildren(e)},closeChildren:function(e){var t=this;e.children.forEach((function(e){e.isShow=!1,e.has_children&&(e.showChildren=!1,t.closeChildren(e))}))},changeType:function(e){},countChildren:function(e){var t=this;return(0,s.default)(o.default.mark((function n(){var i,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,a=function e(t){if(t.children&&t.children.length)for(var n=0;n<t.children.length;n++)i++,e(t.children[n])},t.next=4,a(e);case 4:return t.abrupt("return",i);case 5:case"end":return t.stop()}}),n,t)})))()},cleanValue:function(e){var t=this;return(0,s.default)(o.default.mark((function n(){var i,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.parse((0,a.default)(e)),r=function e(t){if(t.value="",t.source_type="CUSTOM",t.children&&t.children.length)for(var n=0;n<t.children.length;n++)e(t.children[n])},t.next=4,r(i);case 4:return t.abrupt("return",i);case 5:case"end":return t.stop()}}),n,t)})))()},countSon:function(e){return 1===this.bodyTableData.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children.length},addChildren:function(e){var t=this;return(0,s.default)(o.default.mark((function n(){var r,s,c,l,f,u;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.bodyTableData.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0],c=t.bodyTableData.indexOf(s)+1,n.next=4,t.countChildren(s);case 4:return l=n.sent,n.next=7,t.cleanValue(s.children[0]);case 7:return f=n.sent,n.next=10,t.treeToTableList(JSON.parse((0,a.default)([].concat((0,i.default)(s.children),[f]))),s.level+1,s.primaryKey,"array",s.ancestorsList);case 10:return u=n.sent,n.next=13,u.forEach((function(e){e.children=[]}));case 13:return s.children=u.filter((function(e){return e.level===s.level+1})),n.next=16,t.recordChildren(u,s.level+1);case 16:(r=t.bodyTableData).splice.apply(r,[c,l].concat((0,i.default)(u)));case 17:case"end":return n.stop()}}),n,t)})))()},deletChildren:function(e){var t=this;return(0,s.default)(o.default.mark((function n(){var i,a,r;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.countSon(e)){n.next=2;break}return n.abrupt("return");case 2:if(!((i=t.bodyTableData.filter((function(t){return t.level===e.level-1&&t.primaryKey===e.parentPrimaryKey&&t.ancestorsList.toString()===e.ancestorsList.slice(0,-1).toString()}))[0].children).length<=1)){n.next=5;break}return n.abrupt("return");case 5:return i.splice(i.indexOf(e),1),a=t.bodyTableData.indexOf(e),n.next=9,t.countChildren(e);case 9:r=n.sent,t.bodyTableData.splice(a,r+1);case 11:case"end":return n.stop()}}),n,t)})))()},changeField:function(e,t){var n=this;return(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}}),e,n)})))()},addNewItem:function(e){this.$emit("addNewItem",e)}}}},i5S3:function(e,t,n){},ioCs:function(e,t,n){"use strict";n.r(t);var i=n("11QV"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},"j/2n":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-data-content",on:{click:e.closeError}},["CUSTOM"===e.formInfo.source_type?e._l(e.fieldInfo.list,(function(t,i){return n("div",{key:i,staticClass:"bk-custom-line",class:{mb20:i!==e.fieldInfo.list.length-1}},[n("div",{staticClass:"bk-costom-form"},[n("bk-input",{attrs:{maxlength:120,"ext-cls":"bk-custom-input",clearable:!0,disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source)&&"bk_biz_id"!==e.formInfo.key,placeholder:e.$t("m.treeinfo['请输入选项名']")},on:{blur:function(n){return e.putChar(t,i)}},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}}),e._v(" "),"TABLE"===e.formInfo.type?[n("bk-checkbox",{staticStyle:{float:"left","margin-right":"10px","line-height":"32px"},attrs:{"true-value":e.trueStatus,"false-value":e.falseStatus},model:{value:t.required,callback:function(n){e.$set(t,"required",n)},expression:"item.required"}},[e._v("\n                        "+e._s(e.$t("m.treeinfo['必填']"))+"\n                    ")])]:e._e(),e._v(" "),n("bk-input",{attrs:{"ext-cls":"bk-custom-input",disabled:(e.changeInfo.is_builtin||"TABLE"===e.changeInfo.source||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code)&&"bk_biz_id"!==e.formInfo.key,placeholder:e.$t("m.treeinfo['请输入选项ID']")},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"item.key"}}),e._v(" "),n("div",{staticClass:"bk-custom-icon"},[n("i",{staticClass:"bk-itsm-icon icon-flow-add",class:{"bk-no-delete":e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code},on:{click:function(n){return e.addDataLine(t,i)}}}),e._v(" "),n("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===e.fieldInfo.list.length||e.changeInfo.meta&&"APPROVE_RESULT"===e.changeInfo.meta.code},on:{click:function(n){return e.deleteDataLine(t,i)}}})])],2),e._v(" "),n("div",{staticClass:"bk-field-error-tip"},[t.nameCheck?n("p",{staticClass:"bk-field-error"},[e._v(e._s(e.$t('m.deployPage["名称不能为空且不能重复"]')))]):[t.keyCheck?n("p",{staticClass:"bk-field-error"},[e._v(e._s(e.$t('m.deployPage["名称ID为英文数字及下划线且不能重复"]')))]):e._e()]],2)])})):e._e(),e._v(" "),"API"===e.formInfo.source_type?[e.apiInfo.remote_system_id&&e.apiInfo.remote_api_id?n("div",{staticClass:"bk-api-param"},[e.apiDetail.req_params&&e.apiDetail.req_params.length&&e.apiDetail.req_params[0].name?n("div",{staticClass:"bk-param"},[n("get-param",{ref:"getParam",attrs:{entry:"addField","form-info":e.formInfo,"change-info":e.changeInfo,"state-list":e.stateList,"api-detail":e.apiDetail}})],1):e._e(),e._v(" "),e.apiDetail.req_body&&Object.keys(e.apiDetail.req_body).length&&e.apiDetail.req_body.properties&&Object.keys(e.apiDetail.req_body.properties).length?n("div",{staticClass:"bk-param"},[n("post-param",{ref:"postParam",attrs:{entry:"addField","form-info":e.formInfo,"change-info":e.changeInfo,"state-list":e.stateList,"api-detail":e.apiDetail}})],1):e._e(),e._v(" "),e.apiDetail.rsp_data&&Object.keys(e.apiDetail.rsp_data).length&&e.apiDetail.rsp_data.properties&&Object.keys(e.apiDetail.rsp_data.properties).length?n("div",{staticClass:"bk-param"},[n("response-data",{ref:"responseData",attrs:{"remote-api-iid":e.apiInfo.remote_api_id,"change-info":e.changeInfo,"form-info":e.formInfo,"state-list":e.stateList,"api-detail":e.apiDetail}})],1):e._e()]):e._e()]:e._e(),e._v(" "),"RPC"===e.formInfo.source_type?[e.prcTable.length?n("div",{staticClass:"bk-api-param"},[n("div",{staticClass:"bk-param"},[n("get-rpc-param",{ref:"getRpcParam",attrs:{"form-info":e.formInfo,"change-info":e.changeInfo,"state-list":e.stateList,"prc-table":e.prcTable}})],1)]):e._e()]:e._e()],2)},a=[];i._withStripped=!0},jWXv:function(e,t,n){e.exports={default:n("+iuc"),__esModule:!0}},jvs4:function(e,t,n){"use strict";n.r(t);var i=n("4lVZ"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},kicn:function(e,t,n){"use strict";n("fJfp")},lAAG:function(e,t,n){"use strict";n.r(t);var i=n("vWOQ"),a=n("9psX");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("X5Hi");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"fbe1abfa",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/customTableData.vue",t.default=s.exports},ltoX:function(e,t,n){"use strict";n.r(t);var i=n("Qa33"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},mW7z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("P2sY"),r=(i=a)&&i.__esModule?i:{default:i},o=n("CeR/");t.default={name:"dataSource",components:{},mixins:[],props:{formInfo:{type:Object,default:function(){return{}}},prcData:{type:Object,default:function(){return{}}},dictionaryData:{type:Object,default:function(){return{}}},apiInfo:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeClass:"",isApiLoading:!1,isSystemLoading:!1,sourceList:[],apiSysList:[],apiPortList:[]}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},watch:{"formInfo.type":function(){this.initData(),this.getSourceList()}},mounted:function(){this.initData(),this.getSourceList()},methods:{initData:function(){this.typeClass="API"===this.formInfo.source_type?"bk-threeline-item bk-halfline-margin":"bk-halfline-item bk-halfline-margin",this.getApiSystemList(),"API"===this.formInfo.source_type&&this.apiInfo.remote_system_id&&this.getApiPortList(this.apiInfo.remote_system_id)},getSourceList:function(){var e=this.globalChoise.source_type;"TABLE"===this.formInfo.type?this.sourceList=e.filter((function(e){return"CUSTOM"===e.typeName})):"TREESELECT"===this.formInfo.type?this.sourceList=e.filter((function(e){return"DATADICT"===e.typeName||"RPC"===e.typeName})):this.sourceList=this.globalChoise.source_type},getApiSystemList:function(){var e=this,t={project_key:this.$store.state.project.id||"public"};this.isSystemLoading=!0,this.$store.dispatch("apiRemote/get_all_remote_system",t).then((function(t){e.apiSysList=t.data.filter((function(e){return e.is_activated}))})).catch((function(t){(0,o.errorHandler)(t,e)})).finally((function(){e.isSystemLoading=!1}))},getApiPortList:function(e){var t=this,n={remote_system:e||""};this.isApiLoading=!0,this.$store.dispatch("apiRemote/get_remote_api",n).then((function(e){t.apiPortList=e.data.filter((function(e){return e.is_activated}));var n=t.apiPortList.filter((function(e){return String(e.id)===String(t.apiInfo.remote_api_id)}))[0],i=(0,r.default)({},n);t.$emit("changeApiInfo",i)})).catch((function(e){(0,o.errorHandler)(e,t)})).finally((function(){t.isApiLoading=!1}))},changeApiPort:function(e){this.apiInfo.rsp_data="",this.apiInfo.req_params={},this.apiInfo.req_body={};var t=this.apiPortList.filter((function(t){return String(t.id)===String(e)}))[0],n=(0,r.default)({},t);this.$emit("changeApiInfo",n)},changeSource:function(e){this.typeClass="API"===this.formInfo.source_type?"bk-threeline-item bk-halfline-margin":"bk-halfline-item bk-halfline-margin"},changeApiSystem:function(e){this.apiInfo.remote_api_id="",this.apiInfo.rsp_data="",this.apiInfo.req_params={},this.apiInfo.req_body={},this.getApiPortList(e)},changeRpc:function(e){var t=this.prcData.list.filter((function(t){return t.key===e}))[0].req_params;this.$emit("getRpcData",t)},checkSouce:function(){var e=!1;return"DATADICT"===this.formInfo.source_type?e=!this.dictionaryData.check:"API"===this.formInfo.source_type?e=!this.apiInfo.remote_system_id||!this.apiInfo.remote_api_id:"RPC"===this.formInfo.source_type&&(e=!this.prcData.check),e&&this.$bkMessage({theme:"warning",message:this.$t('m.treeinfo["请选择正确的数据源"]')}),e}}}},n3ko:function(e,t,n){var i=n("93I4");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},nXI0:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"empty-page-tip"},[n("div",{staticClass:"tip-content-wrap"},[n("h3",[e._v(e._s(e.title))]),e._v(" "),n("p",[e._v(e._s(e.subTitle))]),e._v(" "),n("div",{staticClass:"btns-area"},[e._t("btns")],2),e._v(" "),n("div",{staticClass:"desc-area"},e._l(e.desc,(function(t,i){return n("div",{key:i,staticClass:"desc-item"},[n("div",{staticClass:"desc-img"},[n("img",{attrs:{src:t.src,alt:"tips"}})]),e._v(" "),n("div",{staticClass:"desc-content"},[n("h4",[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.content))])])])})),0),e._v(" "),n("div",{staticClass:"link-area"},e._l(e.links,(function(t,i){return n("div",{key:i,staticClass:"link-item"},[e._v("\n                "+e._s(t.text)+"\n                "),n("a",{staticClass:"link-btn",attrs:{href:t.href,target:"_blank"}},[e._v("\n                    "+e._s(t.btn)+"\n                    "),n("i",{staticClass:"bk-itsm-icon icon-itsm-icon-three-seven"})])])})),0)])])},a=[];i._withStripped=!0},nlfF:function(e,t,n){"use strict";n.r(t);var i=n("JG59"),a=n("XnKi");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("S3QX");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"2ee0a226",null);s.options.__file="src/views/processManagement/publicField/index.vue",t.default=s.exports},"o+k2":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"child-node"},[e.treeDataList.length?e._l(e.treeDataList,(function(t,i){return n("li",{key:i,staticClass:"vue-tree-item"},[!e.isKeyValue&&t.children&&t.children.length||e.isKeyValue?n("div",{class:["tree-node",{down:t.showChildren,"set-frist-pLeft":e.treeIndex+1===1,active:t.checkInfo}],style:e.pLeft,on:{click:function(n){return n.stopPropagation(),e.toggle(t)}}},[t.showChildren||"object"!==t.type?e._e():n("i",{staticClass:"bk-icon icon-right-shape",class:{"bk-padding":!t.has_children},on:{click:function(n){return n.stopPropagation(),e.toggleChildren(t)}}}),e._v(" "),t.showChildren&&"object"===t.type?n("i",{staticClass:"bk-icon icon-down-shape",class:{"bk-padding":!t.has_children},on:{click:function(n){return n.stopPropagation(),e.toggleChildren(t)}}}):e._e(),e._v(" "),n("i",{staticClass:"bk-icon icon-folder-open-shape"}),e._v(" "),n("span",{staticClass:"name-text",attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),t.checkInfo?n("i",{staticClass:"bk-icon icon-check-1",staticStyle:{float:"right","margin-top":"11px"}}):e._e()]):e._e(),e._v(" "),n("collapse-transition",["object"===t.type&&t.showChildren&&t.children?[n("exportTree",{attrs:{"tree-data-list":t.children,"tree-index":e.treeIndex+1,"is-key-value":e.isKeyValue},on:{selectItem:e.selectItem,toggle:e.toggle,toggleChildren:e.toggleChildren}})]:e._e()],2)],1)})):[e.isKeyValue?e._e():n("li",{staticClass:"vue-tree-item"},[n("div",{staticClass:"tree-node set-frist-pLeft"},[n("span",{staticClass:"name-text"},[e._v(e._s(e.$t('m.deployPage["暂无数据"]')))])])])]],2)},a=[];i._withStripped=!0},o3v5:function(e,t,n){"use strict";n("Ga10")},o9HS:function(e,t,n){"use strict";n.r(t);var i=n("bTF2"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},oiO8:function(e,t,n){},ptjD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"customTableData",props:{customTableInfo:{type:Object,default:function(){return{}}}},data:function(){return{typeList:[{id:"input",name:this.$t('m.treeinfo["输入框"]')},{id:"select",name:this.$t('m.treeinfo["单选框"]')},{id:"multiselect",name:this.$t('m.treeinfo["多选框"]')},{id:"datetime",name:this.$t('m.treeinfo["时间"]')},{id:"date",name:this.$t('m.treeinfo["日期"]')}],trueStatus:!0,falseStatus:!1}},computed:{globalChoise:function(){return this.$store.state.common.configurInfo}},mounted:function(){},methods:{addTableData:function(e,t){this.customTableInfo.list.splice(t+1,0,{name:"",display:"input",choice:"",required:!1})},reduceTableData:function(e,t){1!==this.customTableInfo.list.length&&this.customTableInfo.list.splice(t,1)}}}},q9Lf:function(e,t,n){},qCK4:function(e,t,n){"use strict";n.r(t);var i=n("hmS1"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},qJoz:function(e,t,n){"use strict";n.r(t);var i=n("SioU"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t.default=a.a},qVGl:function(e,t,n){"use strict";n.r(t);var i=n("THJS"),a=n("LJsK");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("LWgf");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"2ec90604",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/defaultValue.vue",t.default=s.exports},rMih:function(e,t,n){"use strict";n.r(t);var i=n("fmQd"),a=n("ioCs");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("scHs");var o=n("KHd+"),s=Object(o.a)(a.default,i.a,i.b,!1,null,"210dfe2e",null);s.options.__file="src/views/processManagement/processDesign/nodeConfigue/addField/index.vue",t.default=s.exports},raTm:function(e,t,n){"use strict";var i=n("5T2Y"),a=n("Y7ZC"),r=n("6/1s"),o=n("KUxP"),s=n("NegM"),c=n("XJU/"),l=n("oioR"),f=n("EXMj"),u=n("93I4"),d=n("RfKB"),p=n("2faE").f,m=n("V7Et")(0),h=n("jmDH");e.exports=function(e,t,n,b,_,y){var v=i[e],k=v,g=_?"set":"add",I=k&&k.prototype,x={};return h&&"function"==typeof k&&(y||I.forEach&&!o((function(){(new k).entries().next()})))?(k=t((function(t,n){f(t,k,e,"_c"),t._c=new v,null!=n&&l(n,_,t[g],t)})),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in I)||y&&"clear"==e||s(k.prototype,e,(function(n,i){if(f(this,k,e),!t&&y&&!u(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,i);return t?this:a}))})),y||p(k.prototype,"size",{get:function(){return this._c.size}})):(k=b.getConstructor(t,e,_,g),c(k.prototype,n),r.NEED=!0),d(k,e),x[e]=k,a(a.G+a.W+a.F,x),y||b.setStrong(k,e,_),k}},rujD:function(e,t,n){"use strict";n("LgrT")},scHs:function(e,t,n){"use strict";n("EYXk")},tDPT:function(e,t,n){},tJou:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this.$createElement;return(this._self._c||e)("section",{staticClass:"code-editor"})},a=[];i._withStripped=!0},ughI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_FORM_DEFAULT_VALUE=void 0;var i,a=n("gDS+"),r=(i=a)&&i.__esModule?i:{default:i};t.CUSTOM_FORM_DEFAULT_VALUE=(0,r.default)({schemes:{},form_data:[]},null,4)},v6xn:function(e,t,n){var i=n("C2SN");e.exports=function(e,t){return new(i(e))(t)}},vSlL:function(e,t,n){"use strict";n("F5gn")},vWOQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bk-customtable-data"},e._l(e.customTableInfo.list,(function(t,i){return n("div",{key:i,staticClass:"bk-custom-line",class:{mb10:i!==e.customTableInfo.list.length-1}},[n("bk-input",{attrs:{"ext-cls":"bk-custom-input",clearable:!0,placeholder:e.$t("m.treeinfo['请输入名称']")},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}}),e._v(" "),n("bk-checkbox",{staticStyle:{float:"left","margin-right":"10px","line-height":"32px"},attrs:{"true-value":e.trueStatus,"false-value":e.falseStatus},model:{value:t.required,callback:function(n){e.$set(t,"required",n)},expression:"item.required"}},[e._v("\n            "+e._s(e.$t("m.treeinfo['必填']"))+"\n        ")]),e._v(" "),n("bk-select",{attrs:{"ext-cls":"bk-custom-small",clearable:!1,searchable:""},model:{value:t.display,callback:function(n){e.$set(t,"display",n)},expression:"item.display"}},e._l(e.typeList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.choice,expression:"item.choice",modifiers:{trim:!0}}],staticClass:"bk-form-textarea bk-textarea-tanble",staticStyle:{width:"180px","min-height":"32px"},attrs:{placeholder:e.$t("m.treeinfo['请输入，Enter分隔']"),disabled:"select"!==t.display&&"multiselect"!==t.display},domProps:{value:t.choice},on:{input:function(n){n.target.composing||e.$set(t,"choice",n.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("div",{staticClass:"bk-custom-icon"},[n("i",{staticClass:"bk-itsm-icon icon-flow-add",on:{click:function(n){return e.addTableData(t,i)}}}),e._v(" "),n("i",{staticClass:"bk-itsm-icon icon-flow-reduce",class:{"bk-no-delete":1===e.customTableInfo.list.length},on:{click:function(n){return e.reduceTableData(t,i)}}})])],1)})),0)},a=[];i._withStripped=!0},"xDl+":function(e,t,n){"use strict";n("5MDp")},xMuw:function(e,t,n){},xvv9:function(e,t,n){n("cHUd")("Set")},yhLn:function(e,t,n){"use strict";n("cPmg")},"z/kA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n("gDS+")),a=l(n("u8Ap")),r=l(n("ybrk")),o=l(n("hk/f")),s=n("dGg1"),c=n("CeR/");function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"defaultValue",components:{memberSelect:a.default,RichTextEditor:r.default,CodeEditor:o.default},props:{formInfo:{type:Object,default:function(){return{}}},fieldInfo:{type:Object,default:function(){return{}}},dictionaryData:{type:Object,default:function(){return{}}},changeInfo:{type:Object,default:function(){return{}}},label:{type:String,default:""},checkStatus:{type:Object,default:function(){return{}}}},data:function(){return{selectList:[],updateStatus:!1,typeList:["MULTISELECT","CHECKBOX","MEMBERS","MEMBER"],precision:0}},watch:{"formInfo.source_type":function(){var e=this;this.updateStatus&&(this.formInfo.default_value=this.typeList.some((function(t){return t===e.formInfo.type}))?[]:""),this.formInfo.source_type!==this.changeInfo.source_type&&(this.updateStatus=!0,this.formInfo.default_value=this.typeList.some((function(t){return t===e.formInfo.type}))?[]:""),"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||(this.formInfo.default_value="")},"formInfo.type":function(){var e=this;this.updateStatus&&(this.formInfo.default_value=this.typeList.some((function(t){return t===e.formInfo.type}))?[]:""),this.formInfo.type!==this.changeInfo.type&&(this.updateStatus=!0,this.formInfo.default_value=this.typeList.some((function(t){return t===e.formInfo.type}))?[]:""),"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||(this.formInfo.default_value="")},"formInfo.default_value":function(){"CUSTOM-FORM"===this.formInfo.type&&(this.checkStatus.customFormStatus=!1)}},mounted:function(){this.changeInfo.id&&"DATADICT"===this.changeInfo.source_type&&this.getDictionList(this.changeInfo.source_uri),""!==this.formInfo.default_value&&this.getSelectList(this.formInfo.default_value)},methods:{getSelectList:function(e){this.selectList=[],e&&("CUSTOM"===this.formInfo.source_type?this.selectList=this.fieldInfo.list.filter((function(e){return e.key&&e.name})):"DATADICT"===this.formInfo.source_type?this.dictionaryData.check&&this.getDictionList(this.dictionaryData.check):"API"!==this.formInfo.source_type&&"RPC"!==this.formInfo.source_type||this.getApiList())},getDictionList:function(e){var t=this,n={key:e};this.$store.dispatch("datadict/get_data_by_key",n).then((function(e){t.selectList=e.data})).catch((function(e){(0,c.errorHandler)(e,t)}))},downCustomFormTempalte:function(){var e=document.createElement("a"),t=+new Date;e.download="bk_itsm_custom_form_template_"+t+".json",e.href="data:text/plain,"+(0,i.default)(s.CUSTOM_FORM_TEMPLATE,null,4),e.click()},getApiList:function(){}}}}}]);